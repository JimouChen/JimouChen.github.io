<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/bitbug_favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/bitbug_favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=JetBrains Mono:300,300italic,400,400italic,700,700italic|Syne Mono:300,300italic,400,400italic,700,700italic|Noto Sans SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jimouchen.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="摘要：使用Python实现数学建模中的一些常见算法和求解过程…">
<meta property="og:type" content="article">
<meta property="og:title" content="Python数学建模相关实现">
<meta property="og:url" content="https://jimouchen.github.io/2021/01/26/PythonMathematicalModeling/index.html">
<meta property="og:site_name" content="Neaya~">
<meta property="og:description" content="摘要：使用Python实现数学建模中的一些常见算法和求解过程…">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125160917373-302412204.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125154651585-1863217363.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125164051771-1805134741.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125190009985-419409110.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125205945946-1572918851.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125231930793-2082702774.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125234039695-755335755.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125234109978-1913319984.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126000059946-133280703.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125235722095-422250700.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126001647795-11891498.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126004745972-533198965.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126011701220-865611893.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126012337702-518099954.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126012856029-403667398.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126013611658-1218001757.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126014328064-1899684542.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126015400873-268245591.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126144816051-2026015349.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126144528055-511872856.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126144816051-2026015349.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126174606468-866209777.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126190430231-1717036362.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126191447722-1250708994.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126191835753-994528864.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126200256933-2071649500.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126201527059-1102395362.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126201916793-1556439911.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126202109626-1562639525.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126203544341-212524774.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127004120044-586264331.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127004905362-1976707119.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127142359134-1130879298.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127145751634-1347413778.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127152448229-250150715.png">
<meta property="article:published_time" content="2021-01-26T14:47:05.000Z">
<meta property="article:modified_time" content="2021-01-31T06:18:07.521Z">
<meta property="article:author" content="jmchen">
<meta property="article:tag" content="Python数学建模">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125160917373-302412204.png">

<link rel="canonical" href="https://jimouchen.github.io/2021/01/26/PythonMathematicalModeling/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Python数学建模相关实现 | Neaya~</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://github.com/JimouChen" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Neaya~</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">笔记、记录、总结</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jimouchen.github.io/2021/01/26/PythonMathematicalModeling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2021/01/28/FYj8OWbtw5vkASy.png">
      <meta itemprop="name" content="jmchen">
      <meta itemprop="description" content="blog and notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neaya~">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python数学建模相关实现
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-26 22:47:05" itemprop="dateCreated datePublished" datetime="2021-01-26T22:47:05+08:00">2021-01-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-31 14:18:07" itemprop="dateModified" datetime="2021-01-31T14:18:07+08:00">2021-01-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" itemprop="url" rel="index"><span itemprop="name">数学建模</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">评论数：</span>
    
    <a title="valine" href="/2021/01/26/PythonMathematicalModeling/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/26/PythonMathematicalModeling/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>34k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>31 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <meta name="referrer" content="no-referrer">  

<p>摘要：使用Python实现数学建模中的一些常见算法和求解过程…</p>
<a id="more"></a>





<h1 id="规划"><a href="#规划" class="headerlink" title="规划"></a>规划</h1><h2 id="线性规划"><a href="#线性规划" class="headerlink" title="线性规划"></a>线性规划</h2><h3 id="scipy求解"><a href="#scipy求解" class="headerlink" title="scipy求解"></a>scipy求解</h3><ul>
<li><p>需要知道目标函数(一般是求最大或者最小值)和约束条件</p>
<p>求解前转化为下面的标准形式</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125160917373-302412204.png" style="zoom:80%;">



</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> optimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求解函数 </span></span><br><span class="line">res = optimize.linprog(c, A, b, Aeq, beq, LB, UB, X0, OPTIONS)</span><br><span class="line"><span class="comment"># 目标函数最小值</span></span><br><span class="line">print(res.fun)</span><br><span class="line"><span class="comment"># 最优解 </span></span><br><span class="line">print(res.x)</span><br></pre></td></tr></table></figure>
<ul>
<li>标准形式是&lt;=，如果是&gt;=，则在两边加上符号-</li>
</ul>
<h4 id="举例1"><a href="#举例1" class="headerlink" title="举例1"></a>举例1</h4><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125154651585-1863217363.png" style="zoom:80%;">

<ul>
<li><p>使用scipy求解z的最大值</p>
<ul>
<li><p>c是目标函数的系数矩阵</p>
</li>
<li><p>A是化成标准的&lt;=式子的左边的系数矩阵</p>
</li>
<li><p>B是化成标准的&lt;=式子的右边的数值矩阵</p>
</li>
<li><p>Aeq是所有=左边的系数矩阵，记得里面是[[]]二维</p>
</li>
<li><p>Beq是所有=右边的数值矩阵</p>
</li>
<li><p>下面第11行-c加-，是因为此题求的是最大值，但是标准格式是求最小值，所以加负号</p>
</li>
<li><p>另外上面的3个变量都大于0，这里可以使用<code>bounds=(0, None)</code>,bounds=(min,max)是范围，None代表无穷，如果不写bounds，那默认是(0, None)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res = optimize.linprog(-c, A, B, Aeq, Beq, bounds=(<span class="number">0</span>, <span class="literal">None</span>))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> optimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确定c,A,b,Aeq,beq</span></span><br><span class="line">c = np.array([<span class="number">2</span>, <span class="number">3</span>, -<span class="number">5</span>])</span><br><span class="line">A = np.array([[-<span class="number">2</span>, <span class="number">5</span>, -<span class="number">1</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>]])</span><br><span class="line">B = np.array([-<span class="number">10</span>, <span class="number">12</span>])</span><br><span class="line">Aeq = np.array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]])</span><br><span class="line">Beq = np.array([<span class="number">7</span>])</span><br><span class="line"><span class="comment"># 求解</span></span><br><span class="line">res = optimize.linprog(-c, A, B, Aeq, Beq)</span><br><span class="line">print(res)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>res</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">     con: array([1.80713222e-09])</span><br><span class="line">     fun: -14.57142856564506</span><br><span class="line"> message: &#39;Optimization terminated successfully.&#39;</span><br><span class="line">     nit: 5</span><br><span class="line">   slack: array([-2.24583019e-10,  3.85714286e+00])</span><br><span class="line">  status: 0</span><br><span class="line"> success: True</span><br><span class="line">       x: array([6.42857143e+00, 5.71428571e-01, 2.35900788e-10])</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>

<ul>
<li>fun是目标函数最小值</li>
<li>x是最优解，即上面的x1,x2,x3的最优解</li>
</ul>
</li>
</ul>
<h4 id="举例2"><a href="#举例2" class="headerlink" title="举例2"></a>举例2</h4><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125164051771-1805134741.png" style="zoom:80%;">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> optimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">c = np.array([<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line">A = np.array([[-<span class="number">1</span>, -<span class="number">4</span>, -<span class="number">2</span>], [-<span class="number">3</span>, -<span class="number">2</span>, <span class="number">0</span>]])</span><br><span class="line">B = np.array([-<span class="number">8</span>, -<span class="number">6</span>])</span><br><span class="line">Aeq = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]])</span><br><span class="line">Beq = np.array([<span class="number">101</span>])</span><br><span class="line"><span class="comment"># 求解</span></span><br><span class="line">res = optimize.linprog(-c, A, B, Aeq, Beq)</span><br><span class="line">print(res)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">con: array([3.75850107e-09])</span><br><span class="line">     fun: -201.9999999893402</span><br><span class="line"> message: &#39;Optimization terminated successfully.&#39;</span><br><span class="line">     nit: 6</span><br><span class="line">   slack: array([ 93.        , 296.99999998])</span><br><span class="line">  status: 0</span><br><span class="line"> success: True</span><br><span class="line">       x: array([1.01000000e+02, 6.13324051e-10, 3.61350245e-10])</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>


<h3 id="pulp求解"><a href="#pulp求解" class="headerlink" title="pulp求解"></a>pulp求解</h3><ul>
<li><p>也可以使用pulp求解，见<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12h411d7Dm?p=4">https://www.bilibili.com/video/BV12h411d7Dm?p=4</a></p>
</li>
<li><p>但是稍微繁琐</p>
</li>
</ul>
<h2 id="pymprog求解"><a href="#pymprog求解" class="headerlink" title="pymprog求解"></a>pymprog求解</h2><ul>
<li><p>官方文档：<a target="_blank" rel="noopener" href="http://pymprog.sourceforge.net/">http://pymprog.sourceforge.net/</a></p>
<p><a target="_blank" rel="noopener" href="http://pymprog.sourceforge.net/intro.html#whetting">http://pymprog.sourceforge.net/intro.html#whetting</a></p>
</li>
</ul>
<h4 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">maximize  15 x + 10 y         # profit</span><br><span class="line">S.T.</span><br><span class="line">             x         &lt;&#x3D;  3  # mountain bike limit</span><br><span class="line">                    y  &lt;&#x3D;  4  # racer limit</span><br><span class="line">             x +    y  &lt;&#x3D;  5  # frame limit</span><br><span class="line">             x &gt;&#x3D;0, y &gt;&#x3D;0     # non-negative</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pymprog <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    begin(<span class="string">&#x27;bike production&#x27;</span>)</span><br><span class="line">    x, y = var(<span class="string">&#x27;x, y&#x27;</span>)  <span class="comment"># variables</span></span><br><span class="line">    maximize(<span class="number">15</span> * x + <span class="number">10</span> * y, <span class="string">&#x27;profit&#x27;</span>)</span><br><span class="line">    x &lt;= <span class="number">3</span>  <span class="comment"># mountain bike limit</span></span><br><span class="line">    y &lt;= <span class="number">4</span>  <span class="comment"># racer production limit</span></span><br><span class="line">    x + y &lt;= <span class="number">5</span>  <span class="comment"># metal finishing limit</span></span><br><span class="line">    solve()</span><br><span class="line"></span><br><span class="line">    print(<span class="string">&#x27;x取值：&#x27;</span> + <span class="built_in">str</span>(x.primal))</span><br><span class="line">    print(<span class="string">&#x27;y取值：&#x27;</span> + <span class="built_in">str</span>(y.primal))</span><br><span class="line">    print(<span class="string">&#x27;最优解为：&#x27;</span> + <span class="built_in">str</span>(vobj()))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>res</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GLPK Simplex Optimizer, v4.65</span><br><span class="line">1 row, 2 columns, 2 non-zeros</span><br><span class="line">*     0: obj &#x3D;  -0.000000000e+00 inf &#x3D;   0.000e+00 (2)</span><br><span class="line">*     2: obj &#x3D;   6.500000000e+01 inf &#x3D;   0.000e+00 (0)</span><br><span class="line">OPTIMAL LP SOLUTION FOUND</span><br><span class="line">x取值：3.0</span><br><span class="line">y取值：2.0</span><br><span class="line">最优解为：65.0</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>




<h2 id="整数规划"><a href="#整数规划" class="headerlink" title="整数规划"></a>整数规划</h2><h3 id="cvxpy求解"><a href="#cvxpy求解" class="headerlink" title="cvxpy求解"></a>cvxpy求解</h3><ul>
<li><p>和线性规划差不多，但是多了个约束，那就是部分变量被约束为整数</p>
</li>
<li><p>目前没有一种方法可以有效地求解一切整数规划。常见的整数规划求解算法有：</p>
<ul>
<li>分支定界法：可求纯或混合整数线性规划；</li>
<li>割平面法：可求纯或混合整数线性规划；</li>
<li>隐枚举法：用于求解0-1整数规划，有过滤隐枚举法和分支隐枚举法；</li>
<li>匈牙利法：解决指派问题（0-1规划特殊情形）；</li>
<li>Monte Carlo法：求解各种类型规划。</li>
</ul>
</li>
</ul>
<h4 id="举例1-1"><a href="#举例1-1" class="headerlink" title="举例1"></a>举例1</h4><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125190009985-419409110.png" style="zoom:80%;">

<ul>
<li>同理也是化成&lt;=的标准形式</li>
<li>这里的改动只需要我们输入n,a,b,c，以及第10行的小改动，n,a,b,c含义和上面线性规划一样，如果有Aeq和Beq也是同理，加上即可，然后放进cons(下面第11行)里面</li>
<li>如果是求最大，第10行用cp.Maximize</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cvxpy <span class="keyword">as</span> cp</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> array</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n = <span class="number">2</span>  <span class="comment"># 两个变量</span></span><br><span class="line">    c = array([<span class="number">40</span>, <span class="number">90</span>])  <span class="comment"># 定义目标向量</span></span><br><span class="line">    a = array([[<span class="number">9</span>, <span class="number">7</span>], [-<span class="number">7</span>, -<span class="number">20</span>]])  <span class="comment"># 定义约束矩阵</span></span><br><span class="line">    b = array([<span class="number">56</span>, -<span class="number">70</span>])  <span class="comment"># 定义约束条件的右边向量</span></span><br><span class="line">    x = cp.Variable(n, integer=<span class="literal">True</span>)  <span class="comment"># 定义两个整数决策变量</span></span><br><span class="line">    obj = cp.Minimize(c * x)  <span class="comment"># 构造目标函数</span></span><br><span class="line">    cons = [a * x &lt;= b, x &gt;= <span class="number">0</span>]  <span class="comment"># 构造约束条件</span></span><br><span class="line">    prob = cp.Problem(obj, cons)  <span class="comment"># 构建问题模型</span></span><br><span class="line">    prob.solve(solver=<span class="string">&#x27;GLPK_MI&#x27;</span>, verbose=<span class="literal">True</span>)  <span class="comment"># 求解问题</span></span><br><span class="line">    <span class="comment"># prob.solve(solver=cp.CPLEX, verbose=True)  # cp.CPLEX也可以</span></span><br><span class="line">    print(<span class="string">&quot;最优值为:&quot;</span>, prob.value)</span><br><span class="line">    print(<span class="string">&quot;最优解为:&quot;</span>, x.value)</span><br></pre></td></tr></table></figure>
<ul>
<li>运行结果会有警告，但是不影响结果</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">      0: obj &#x3D;   2.700000000e+02 inf &#x3D;   6.250e-01 (1)</span><br><span class="line">      1: obj &#x3D;   3.150000000e+02 inf &#x3D;   0.000e+00 (0)</span><br><span class="line">Long-step dual simplex will be used</span><br><span class="line">+     1: mip &#x3D;     not found yet &gt;&#x3D;              -inf        (1; 0)</span><br><span class="line">Solution found by heuristic: 360</span><br><span class="line">+     2: &gt;&gt;&gt;&gt;&gt;   3.500000000e+02 &gt;&#x3D;   3.500000000e+02   0.0% (1; 0)</span><br><span class="line">+     2: mip &#x3D;   3.500000000e+02 &gt;&#x3D;     tree is empty   0.0% (0; 1)</span><br><span class="line">最优值为: 350.0</span><br><span class="line">最优解为: [2. 3.]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<ul>
<li>参考：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/344215929">https://zhuanlan.zhihu.com/p/344215929</a></li>
</ul>
<h2 id="非线性规划"><a href="#非线性规划" class="headerlink" title="非线性规划"></a>非线性规划</h2><ul>
<li><p>非线性规划可分为两种，目标函数是凸函数或者是非凸函数</p>
<ul>
<li><p>凸函数的非线性规划：如f = x^2+y^2+x*y，可以使用scipy</p>
</li>
<li><p>非凸函数的非线性规划：如求极值，可以有如下方法</p>
<ul>
<li><p>纯数学方法，求导求极值</p>
</li>
<li><p>神经网络，深度学习(bp算法链式求导)</p>
</li>
<li><p>scipy.optimize.minimize</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fun：求最小值的目标函数</span><br><span class="line">args：常数值</span><br><span class="line">method：求极值方法，一般默认。</span><br><span class="line">constraints：约束条件</span><br><span class="line">x0：变量的初始猜测值，注意 minimize是局部最优</span><br></pre></td></tr></table></figure>
<h4 id="举例-1"><a href="#举例-1" class="headerlink" title="举例"></a>举例</h4></li>
</ul>
</li>
</ul>
</li>
<li><p>计算1/x+x的最小值</p>
<ul>
<li>只需要改12行的系数，15行的初始猜测值，和8行的函数</li>
<li>如果结果是True，则是找到局部最优解，若是False，则结果是错误的</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> minimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># f = 1/x+x</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>(<span class="params">args</span>):</span></span><br><span class="line">    a = args</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: a / x[<span class="number">0</span>] + x[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    args = (<span class="number">1</span>)  <span class="comment"># a</span></span><br><span class="line">    <span class="comment"># x0 = np.asarray((1.5))  # 初始猜测值</span></span><br><span class="line">    <span class="comment"># x0 = np.asarray((2.2))  # 初始猜测值</span></span><br><span class="line">    x0 = np.asarray((<span class="number">2</span>))  <span class="comment"># 设置初始猜测值</span></span><br><span class="line"></span><br><span class="line">    res = minimize(fun(args), x0, method=<span class="string">&#x27;SLSQP&#x27;</span>)</span><br><span class="line">    print(<span class="string">&#x27;最值:&#x27;</span>, res.fun)</span><br><span class="line">    print(<span class="string">&#x27;是否是最优解&#x27;</span>, res.success)</span><br><span class="line">    print(<span class="string">&#x27;取到最值时，x的值(最优解)是&#x27;</span>, res.x)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">最值: 2.00000007583235</span><br><span class="line">是否是最优解 True</span><br><span class="line">取到最值时，x的值(最优解)是 [1.00027541]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>




</li>
</ul>
<h4 id="举例2-1"><a href="#举例2-1" class="headerlink" title="举例2"></a>举例2</h4><ul>
<li><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125205945946-1572918851.png" style="zoom:67%;">
</li>
<li><p>x1,x2,x3的范围都在0.1到0.9 之间</p>
</li>
<li><p>x是变量矩阵，如x[0]即为x1</p>
</li>
<li><p>需要变动的是函数fun，con,27,29,32行，x0的设置要尽在要求的0.1到0.9范围内</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> minimize</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算(2+x1)/(1+x2)- 3*x1+4*x3</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>(<span class="params">args</span>):</span></span><br><span class="line">    a, b, c, d = args</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: (a + x[<span class="number">0</span>]) / (b + x[<span class="number">1</span>]) - c * x[<span class="number">0</span>] + d * x[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">con</span>(<span class="params">args</span>):</span></span><br><span class="line">    <span class="comment"># 约束条件 分为eq 和ineq</span></span><br><span class="line">    <span class="comment"># eq表示 函数结果等于0</span></span><br><span class="line">    <span class="comment"># ineq 表示 表达式大于等于0</span></span><br><span class="line">    x1min, x1max, x2min, x2max, x3min, x3max = args</span><br><span class="line">    cons = (&#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: <span class="keyword">lambda</span> x: x[<span class="number">0</span>] - x1min&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: <span class="keyword">lambda</span> x: -x[<span class="number">0</span>] + x1max&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: <span class="keyword">lambda</span> x: x[<span class="number">1</span>] - x2min&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: <span class="keyword">lambda</span> x: -x[<span class="number">1</span>] + x2max&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: <span class="keyword">lambda</span> x: x[<span class="number">2</span>] - x3min&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;ineq&#x27;</span>, <span class="string">&#x27;fun&#x27;</span>: <span class="keyword">lambda</span> x: -x[<span class="number">2</span>] + x3max&#125;)</span><br><span class="line">    <span class="keyword">return</span> cons</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 定义常量值</span></span><br><span class="line">    args = (<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)  <span class="comment"># a,b,c,d</span></span><br><span class="line">    <span class="comment"># 设置参数范围/约束条件</span></span><br><span class="line">    args1 = (<span class="number">0.1</span>, <span class="number">0.9</span>, <span class="number">0.1</span>, <span class="number">0.9</span>, <span class="number">0.1</span>, <span class="number">0.9</span>)  <span class="comment"># x1min, x1max, x2min,x2max</span></span><br><span class="line">    cons = con(args1)</span><br><span class="line">    <span class="comment"># 设置初始猜测值</span></span><br><span class="line">    x0 = np.asarray((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))</span><br><span class="line">    res = minimize(fun(args), x0, method=<span class="string">&#x27;SLSQP&#x27;</span>, constraints=cons)</span><br><span class="line">    print(<span class="string">&#x27;最值:&#x27;</span>, res.fun)</span><br><span class="line">    print(<span class="string">&#x27;是否是最优解&#x27;</span>, res.success)</span><br><span class="line">    print(<span class="string">&#x27;取到最值时，x的值(最优解)是&#x27;</span>, res.x)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">最值: -0.773684210526435</span><br><span class="line">是否是最优解 True</span><br><span class="line">取到最值时，x的值(最优解)是 [0.9 0.9 0.1]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></li>
<li><p>可以看出对于这类简单函数，局部最优解与真实最优解相差不大，但是对于复杂的函数，x0的初始值设置，会很大程度影响最优解的结果</p>
</li>
</ul>
<h1 id="数值逼近"><a href="#数值逼近" class="headerlink" title="数值逼近"></a>数值逼近</h1><h2 id="一维和二维插值"><a href="#一维和二维插值" class="headerlink" title="一维和二维插值"></a>一维和二维插值</h2><ul>
<li>参考<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12h411d7Dm?p=5">https://www.bilibili.com/video/BV12h411d7Dm?p=5</a></li>
<li>都使得图像更加光滑</li>
</ul>
<h2 id="最小二乘法拟合"><a href="#最小二乘法拟合" class="headerlink" title="最小二乘法拟合"></a>最小二乘法拟合</h2><ul>
<li><p>用的是</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> leastsq</span><br></pre></td></tr></table></figure>
<h4 id="举例-2"><a href="#举例-2" class="headerlink" title="举例"></a>举例</h4></li>
<li><p>一组数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X &#x3D; np.array([8.19, 2.72, 6.39, 8.71, 4.7, 2.66, 3.78])</span><br><span class="line">Y &#x3D; np.array([7.01, 2.78, 6.47, 6.71, 4.1, 4.23, 4.05])</span><br></pre></td></tr></table></figure></li>
<li><p>使用leastsq</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> scipy.optimize <span class="keyword">import</span> leastsq</span><br><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> mpl</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;Microsoft YaHei&#x27;</span>]  <span class="comment"># 指定默认字体</span></span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>  <span class="comment"># 解决保存图像是负号&#x27;-&#x27;显示为方块的问题</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算以p为参数的直线与原始数据之间误差</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span>(<span class="params">p</span>):</span></span><br><span class="line">    k, b = p</span><br><span class="line">    <span class="keyword">return</span> Y - (k * X + b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    X = np.array([<span class="number">8.19</span>, <span class="number">2.72</span>, <span class="number">6.39</span>, <span class="number">8.71</span>, <span class="number">4.7</span>, <span class="number">2.66</span>, <span class="number">3.78</span>])</span><br><span class="line">    Y = np.array([<span class="number">7.01</span>, <span class="number">2.78</span>, <span class="number">6.47</span>, <span class="number">6.71</span>, <span class="number">4.1</span>, <span class="number">4.23</span>, <span class="number">4.05</span>])</span><br><span class="line">    <span class="comment"># leastsq使得f的输出数组的平方和最小，参数初始值为[1,0]</span></span><br><span class="line">    r = leastsq(f, [<span class="number">1</span>, <span class="number">0</span>])  <span class="comment"># 数初始值可以随便设个合理的</span></span><br><span class="line">    k, b = r[<span class="number">0</span>]</span><br><span class="line">    x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">1000</span>)</span><br><span class="line">    y = k * x + b</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 画散点图，s是点的大小</span></span><br><span class="line">    plt.scatter(X, Y, s=<span class="number">100</span>, alpha=<span class="number">1.0</span>, marker=<span class="string">&#x27;o&#x27;</span>, label=<span class="string">u&#x27;数据点&#x27;</span>)</span><br><span class="line">    <span class="comment"># 话拟合曲线，linewidth是线宽</span></span><br><span class="line">    plt.plot(x, y, color=<span class="string">&#x27;r&#x27;</span>, linewidth=<span class="number">2</span>, linestyle=<span class="string">&quot;-&quot;</span>, markersize=<span class="number">20</span>, label=<span class="string">u&#x27;拟合曲线&#x27;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;安培/A&#x27;</span>)  <span class="comment"># 美赛就不用中文了</span></span><br><span class="line">    plt.ylabel(<span class="string">&#x27;伏特/V&#x27;</span>)</span><br><span class="line">    plt.legend(loc=<span class="number">0</span>, numpoints=<span class="number">1</span>)  <span class="comment"># 显示点和线的说明</span></span><br><span class="line">    <span class="comment"># plt.plot(X, Y)</span></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    print(<span class="string">&#x27;k = &#x27;</span>, k)</span><br><span class="line">    print(<span class="string">&#x27;b = &#x27;</span>, b)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">k &#x3D;  0.6134953491930442</span><br><span class="line">b &#x3D;  1.794092543259387</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125231930793-2082702774.png" style="zoom:67%;">

<ul>
<li><p>另外，这个线性拟合也可以使用sklearn求k和b，再去画图</p>
<ul>
<li>注意维度转换X = X.reshape(-1, 1)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    X = np.array([<span class="number">8.19</span>, <span class="number">2.72</span>, <span class="number">6.39</span>, <span class="number">8.71</span>, <span class="number">4.7</span>, <span class="number">2.66</span>, <span class="number">3.78</span>])</span><br><span class="line">    Y = np.array([<span class="number">7.01</span>, <span class="number">2.78</span>, <span class="number">6.47</span>, <span class="number">6.71</span>, <span class="number">4.1</span>, <span class="number">4.23</span>, <span class="number">4.05</span>])</span><br><span class="line">    X = X.reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">    model = linear_model.LinearRegression()</span><br><span class="line">    model.fit(X, Y)</span><br><span class="line">    print(<span class="string">&#x27;k = &#x27;</span>, model.coef_)</span><br><span class="line">    print(<span class="string">&#x27;b = &#x27;</span>, model.intercept_)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">k &#x3D;  [0.61349535]</span><br><span class="line">b &#x3D;  1.7940925542916233</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></li>
<li><p>更多线性和非线性问题、如多元回归、逻辑回归、其他分类问题，见我之前的sklearn blog</p>
</li>
</ul>
<h1 id="微分方程"><a href="#微分方程" class="headerlink" title="微分方程"></a>微分方程</h1><ul>
<li><p>微分方程是用来描述某一类函数与其导数之间关系的方程，其解是一个符合方程的函数。微分方程按自变量个数可分为 <strong>常微分方程</strong>和<strong>偏微分方程</strong>，</p>
<p>前者表达通式 ：<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125234039695-755335755.png" style="zoom:50%;"></p>
<p>后者表达通式：<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125234109978-1913319984.png" style="zoom:67%;"></p>
</li>
<li><p>建议稍微复习一下高数上册最后微分方程那章再看看会更好</p>
</li>
</ul>
<h2 id="解析解"><a href="#解析解" class="headerlink" title="解析解"></a>解析解</h2><ul>
<li><p>使用sympy库，但是得到的是字符形式的格式</p>
<p>如下这种,如果结果是比较复杂的，可能太丑</p>
<p>如 <img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126000059946-133280703.png" style="zoom: 50%;"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sympy</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_ics</span>(<span class="params">sol, ics, x, known_params</span>):</span></span><br><span class="line">    free_params = sol.free_symbols - <span class="built_in">set</span>(known_params)</span><br><span class="line">    eqs = [(sol.lhs.diff(x, n) - sol.rhs.diff(x, n)).subs(x, <span class="number">0</span>).subs(ics) <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ics))]</span><br><span class="line">    sol_params = sympy.solve(eqs, free_params)</span><br><span class="line">    <span class="keyword">return</span> sol.subs(sol_params)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    sympy.init_printing()  <span class="comment"># 初始化打印环境</span></span><br><span class="line">    t, omega0, gamma = sympy.symbols(<span class="string">&quot;t, omega_0, gamma&quot;</span>, positive=<span class="literal">True</span>)  <span class="comment"># 标记参数，且均为正</span></span><br><span class="line">    x = sympy.Function(<span class="string">&#x27;x&#x27;</span>)  <span class="comment"># 标记x是微分函数，非变量</span></span><br><span class="line">    ode = x(t).diff(t, <span class="number">2</span>) + <span class="number">2</span> * gamma * omega0 * x(t).diff(t) + omega0 ** <span class="number">2</span> * x(t)</span><br><span class="line">    ode_sol = sympy.dsolve(ode)  <span class="comment"># 用diff()和dsolve得到通解</span></span><br><span class="line">    ics = &#123;x(<span class="number">0</span>): <span class="number">1</span>, x(t).diff(t).subs(t, <span class="number">0</span>): <span class="number">0</span>&#125;  <span class="comment"># 将初始条件字典匹配</span></span><br><span class="line">    x_t_sol = apply_ics(ode_sol, ics, t, [omega0, gamma])</span><br><span class="line">    sympy.pprint(x_t_sol)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>此段解释可见：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12h411d7Dm?p=6">https://www.bilibili.com/video/BV12h411d7Dm?p=6</a></li>
</ul>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210125235722095-422250700.png" style="zoom:80%;">

<ul>
<li><p>如果最后加上<code>print(x_t_sol)</code></p>
<p>结果为：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Eq(x(t), (-gamma&#x2F;(2*sqrt(gamma**2 - 1)) + 1&#x2F;2)*exp(omega_0*t*(-gamma - sqrt(gamma - 1)*sqrt(gamma + 1))) + (gamma&#x2F;(2*sqrt(gamma**2 - 1)) + 1&#x2F;2)*exp(omega_0*t*(-gamma + sqrt(gamma - 1)*sqrt(gamma + 1))))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
<li><p>结果较为简单的常微分方程</p>
<ul>
<li>f(x)’’+f(x)=0 二阶常系数齐次微分方程</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sympy <span class="keyword">as</span> sy</span><br><span class="line"></span><br><span class="line"><span class="comment"># f(x)&#x27;&#x27;+f(x)=0 二阶常系数齐次微分方程</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">differential_equation</span>(<span class="params">x, f</span>):</span></span><br><span class="line">    <span class="keyword">return</span> sy.diff(f(x), x, <span class="number">2</span>) + f(x)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    x = sy.symbols(<span class="string">&#x27;x&#x27;</span>)  <span class="comment"># 约定变量</span></span><br><span class="line">    f = sy.Function(<span class="string">&#x27;f&#x27;</span>)  <span class="comment"># 约定函数</span></span><br><span class="line">    print(sy.dsolve(differential_equation(x, f), f(x)))  <span class="comment"># 打印</span></span><br><span class="line">    sy.pprint(sy.dsolve(differential_equation(x, f), f(x)))  <span class="comment"># 漂亮的打印</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Eq(f(x), C1*sin(x) + C2*cos(x))</span><br><span class="line">f(x) &#x3D; C₁⋅sin(x) + C₂⋅cos(x)</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure></li>
<li><p>可以参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/your_answer/article/details/79234275">https://blog.csdn.net/your_answer/article/details/79234275</a></p>
</li>
</ul>
<h2 id="数值解"><a href="#数值解" class="headerlink" title="数值解"></a>数值解</h2><ul>
<li>当ODE(常微分方程)无法求得解析解时，可以用scipy中的integrate.odeint求数值解来探索其解的部分性质,并辅以可视化，能直观地展现ODE解的函数表达</li>
</ul>
<h4 id="举例-3"><a href="#举例-3" class="headerlink" title="举例"></a>举例</h4><ul>
<li><p>一阶非线性常微分方程 <img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126001647795-11891498.png" style="zoom:50%;"></p>
</li>
<li><p>plot_direction_field函数里面的参数意义：</p>
<ul>
<li>y_x:也就是y(x)</li>
<li>f_xy:也就是x-y(x)^2</li>
<li>x_lim=(-5, 5), y_lim=(-5, 5)也就是在这个x，y轴的范围展示出来</li>
</ul>
</li>
<li><p>关键需要修改的部分,29-31行，33行的y0需要适当调</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = sympy.symbols(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">y = sympy.Function(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">f = x - y(x) ** <span class="number">2</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> integrate</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> sympy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_direction_field</span>(<span class="params">x, y_x, f_xy, x_lim=(<span class="params">-<span class="number">5</span>, <span class="number">5</span></span>), y_lim=(<span class="params">-<span class="number">5</span>, <span class="number">5</span></span>), ax=<span class="literal">None</span></span>):</span></span><br><span class="line">    f_np = sympy.lambdify((x, y_x), f_xy, <span class="string">&#x27;numpy&#x27;</span>)</span><br><span class="line">    x_vec = np.linspace(x_lim[<span class="number">0</span>], x_lim[<span class="number">1</span>], <span class="number">20</span>)</span><br><span class="line">    y_vec = np.linspace(y_lim[<span class="number">0</span>], y_lim[<span class="number">1</span>], <span class="number">20</span>)</span><br><span class="line">    <span class="keyword">if</span> ax <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        _, ax = plt.subplots(figsize=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">    dx = x_vec[<span class="number">1</span>] - x_vec[<span class="number">0</span>]</span><br><span class="line">    dy = y_vec[<span class="number">1</span>] - y_vec[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> m, xx <span class="keyword">in</span> <span class="built_in">enumerate</span>(x_vec):</span><br><span class="line">        <span class="keyword">for</span> n, yy <span class="keyword">in</span> <span class="built_in">enumerate</span>(y_vec):</span><br><span class="line">            Dy = f_np(xx, yy) * dx</span><br><span class="line">            Dx = <span class="number">0.8</span> * dx ** <span class="number">2</span> / np.sqrt(dx ** <span class="number">2</span> + Dy ** <span class="number">2</span>)</span><br><span class="line">            Dy = <span class="number">0.8</span> * Dy * dy / np.sqrt(dx ** <span class="number">2</span> + Dy ** <span class="number">2</span>)</span><br><span class="line">            ax.plot([xx - Dx / <span class="number">2</span>, xx + Dx / <span class="number">2</span>], [yy - Dy / <span class="number">2</span>, yy + Dy / <span class="number">2</span>], <span class="string">&#x27;b&#x27;</span>, lw=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">    ax.axis(<span class="string">&#x27;tight&#x27;</span>)</span><br><span class="line">    ax.set_title(<span class="string">r&#x27;$ % s$&#x27;</span> % (sympy.latex(sympy.Eq(y_x.diff(x), f_xy))), fontsize=<span class="number">18</span>)</span><br><span class="line">    <span class="keyword">return</span> ax</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    x = sympy.symbols(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">    y = sympy.Function(<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">    f = x - y(x) ** <span class="number">2</span></span><br><span class="line">    f_np = sympy.lambdify((y(x), x), f)  <span class="comment"># 符号表达式转隐函数</span></span><br><span class="line">    y0 = <span class="number">1</span> <span class="comment"># odeint需要给个初始值</span></span><br><span class="line">    xp = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">100</span>)</span><br><span class="line">    yp = integrate.odeint(f_np, y0, xp)  <span class="comment"># 初始y0解f_np,x范围xp</span></span><br><span class="line">    xn = np.linspace(<span class="number">0</span>, -<span class="number">5</span>, <span class="number">100</span>)</span><br><span class="line">    yn = integrate.odeint(f_np, y0, xp)</span><br><span class="line">    fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>, figsize=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line">    plot_direction_field(x, y(x), f, ax=ax)  <span class="comment"># 绘制f的场线图</span></span><br><span class="line">    ax.plot(xn, yn, <span class="string">&#x27;b&#x27;</span>, lw=<span class="number">2</span>)</span><br><span class="line">    ax.plot(xp, yp, <span class="string">&#x27;r&#x27;</span>, lw=<span class="number">2</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126004745972-533198965.png" style="zoom:67%;">



<h2 id="传染病模型"><a href="#传染病模型" class="headerlink" title="传染病模型"></a>传染病模型</h2><ul>
<li><p>传染病模型研究属于传染病动力学研究方向，这里只是将模型中微分方程进行了python实现</p>
</li>
<li><p>传染病模型包括：SI、SIS、SIR、SIRS、SEIR、SEIRS共六个模型</p>
</li>
</ul>
<h3 id="SI模型"><a href="#SI模型" class="headerlink" title="SI模型"></a>SI模型</h3><ul>
<li><p>比如病毒传染初期，没有加防疫手段，就符合SI模型</p>
</li>
<li><p>SI模型的表达式见网上(S:易感染，I:已感染)</p>
</li>
<li><p>需要修改的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.25</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">S_0 = N - I_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br></pre></td></tr></table></figure>
<ul>
<li>β为传染率系数,比如现在100个人已经传染了，在一段时间内，传染新增了25人，则β为0.25</li>
<li>gamma为恢复率系数，一开始没有抗体都是为0的，如果不为0，比如是开始有100人感染，在一个传播时间T后，治愈了6个人，则gamma取0.06</li>
<li>I_0为感染者的初始人数</li>
<li>S_0为易感染者的初始人数，这个要看情况，如果都不加干预，那就是N - I_0，一般看情况需要再考虑其他因素(交通，社交群体，航线等)，S_0考虑的越多，则越完备</li>
<li>Susceptible易感染的，Infection已经感染的</li>
</ul>
</li>
<li><p>code</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.integrate <span class="keyword">as</span> spi</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.25</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">S_0 = N - I_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br><span class="line">INI = (S_0, I_0)  <span class="comment"># INI为初始状态下的数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcSI</span>(<span class="params">inivalue, _</span>):</span></span><br><span class="line">    Y = np.zeros(<span class="number">2</span>)</span><br><span class="line">    X = inivalue</span><br><span class="line">    Y[<span class="number">0</span>] = -(beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N + gamma * X[<span class="number">1</span>]  <span class="comment"># 易感个体变化</span></span><br><span class="line">    Y[<span class="number">1</span>] = (beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N - gamma * X[<span class="number">1</span>]  <span class="comment"># 感染个体变化</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    T_range = np.arange(<span class="number">0</span>, T + <span class="number">1</span>)</span><br><span class="line">    RES = spi.odeint(funcSI, INI, T_range)</span><br><span class="line">    plt.plot(RES[:, <span class="number">0</span>], color=<span class="string">&#x27;darkblue&#x27;</span>, label=<span class="string">&#x27;Susceptible&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">1</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Infection&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;SI Model&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Day&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Number&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126011701220-865611893.png" style="zoom: 80%;">

<ul>
<li>可以看到10000个人大概在60天左右就全部感染了</li>
</ul>
<h3 id="SIS模型"><a href="#SIS模型" class="headerlink" title="SIS模型"></a>SIS模型</h3><ul>
<li>与SI区别不大，区别在于7行的gamma有初始值，以及17行的公式改变了</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.integrate <span class="keyword">as</span> spi</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.25</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0.05</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">S_0 = N - I_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br><span class="line">INI = (S_0, I_0)  <span class="comment"># INI为初始状态下的数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcSI</span>(<span class="params">inivalue, _</span>):</span></span><br><span class="line">    Y = np.zeros(<span class="number">2</span>)</span><br><span class="line">    X = inivalue</span><br><span class="line">    Y[<span class="number">0</span>] = -(beta * X[<span class="number">0</span>]) / N * X[<span class="number">1</span>] + gamma * X[<span class="number">1</span>]  <span class="comment"># 易感个体变化</span></span><br><span class="line">    Y[<span class="number">1</span>] = (beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N - gamma * X[<span class="number">1</span>]  <span class="comment"># 感染个体变化</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    T_range = np.arange(<span class="number">0</span>, T + <span class="number">1</span>)</span><br><span class="line">    RES = spi.odeint(funcSI, INI, T_range)</span><br><span class="line">    plt.plot(RES[:, <span class="number">0</span>], color=<span class="string">&#x27;darkblue&#x27;</span>, label=<span class="string">&#x27;Susceptible&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">1</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Infection&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;SIS Model&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Day&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Number&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126012337702-518099954.png" style="zoom:80%;">

<ul>
<li>可以看到60-80天之间，逐渐稳定，有的人治愈后(获得抗体)活了下来，有的没治愈的就死了</li>
</ul>
<h3 id="SIR模型"><a href="#SIR模型" class="headerlink" title="SIR模型"></a>SIR模型</h3><ul>
<li>多了R_0为治愈者的初始人数，即刚开始注射疫苗恢复的人</li>
<li>表达式也改变</li>
<li>注意恢复治愈包括自身产生抗体以及通过医疗手段获得抗体两种</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.integrate <span class="keyword">as</span> spi</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.25</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0.05</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">R_0 = <span class="number">0</span>  <span class="comment"># R_0为治愈者的初始人数</span></span><br><span class="line">S_0 = N - I_0 - R_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br><span class="line">INI = (S_0, I_0, R_0)  <span class="comment"># INI为初始状态下的数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcSIR</span>(<span class="params">inivalue, _</span>):</span></span><br><span class="line">    Y = np.zeros(<span class="number">3</span>)</span><br><span class="line">    X = inivalue</span><br><span class="line">    Y[<span class="number">0</span>] = -(beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N  <span class="comment"># 易感个体变化</span></span><br><span class="line">    Y[<span class="number">1</span>] = (beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N - gamma * X[<span class="number">1</span>]  <span class="comment"># 感染个体变化</span></span><br><span class="line">    Y[<span class="number">2</span>] = gamma * X[<span class="number">1</span>]  <span class="comment"># 治愈个体变化</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    T_range = np.arange(<span class="number">0</span>, T + <span class="number">1</span>)</span><br><span class="line">    RES = spi.odeint(funcSIR, INI, T_range)</span><br><span class="line">    plt.plot(RES[:, <span class="number">0</span>], color=<span class="string">&#x27;darkblue&#x27;</span>, label=<span class="string">&#x27;Susceptible&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">1</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Infection&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">2</span>], color=<span class="string">&#x27;green&#x27;</span>, label=<span class="string">&#x27;Recovery&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;SIR Model&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Day&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Number&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126012856029-403667398.png" style="zoom:80%;">

<ul>
<li>可以看到感染人数出现峰值，在前期已经开始使用抗体，病人逐渐治愈，最后所有人都恢复健康</li>
</ul>
<h3 id="SIRS模型"><a href="#SIRS模型" class="headerlink" title="SIRS模型"></a>SIRS模型</h3><ul>
<li>多了Ts为抗体持续时间，也就是说有了抗体一段时间后，抗体失效，又变成了易感染人群</li>
<li>公式也改变</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.integrate <span class="keyword">as</span> spi</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.25</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0.05</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">Ts = <span class="number">7</span>  <span class="comment"># Ts为抗体持续时间</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">R_0 = <span class="number">0</span>  <span class="comment"># R_0为治愈者的初始人数</span></span><br><span class="line">S_0 = N - I_0 - R_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br><span class="line">INI = (S_0, I_0, R_0)  <span class="comment"># INI为初始状态下的数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcSIRS</span>(<span class="params">inivalue, _</span>):</span></span><br><span class="line">    Y = np.zeros(<span class="number">3</span>)</span><br><span class="line">    X = inivalue</span><br><span class="line">    Y[<span class="number">0</span>] = -(beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N + X[<span class="number">2</span>] / Ts  <span class="comment"># 易感个体变化</span></span><br><span class="line">    Y[<span class="number">1</span>] = (beta * X[<span class="number">0</span>] * X[<span class="number">1</span>]) / N - gamma * X[<span class="number">1</span>]  <span class="comment"># 感染个体变化</span></span><br><span class="line">    Y[<span class="number">2</span>] = gamma * X[<span class="number">1</span>] - X[<span class="number">2</span>] / Ts  <span class="comment"># 治愈个体变化</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    T_range = np.arange(<span class="number">0</span>, T + <span class="number">1</span>)</span><br><span class="line">    RES = spi.odeint(funcSIRS, INI, T_range)</span><br><span class="line">    plt.plot(RES[:, <span class="number">0</span>], color=<span class="string">&#x27;darkblue&#x27;</span>, label=<span class="string">&#x27;Susceptible&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">1</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Infection&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">2</span>], color=<span class="string">&#x27;green&#x27;</span>, label=<span class="string">&#x27;Recovery&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;SIRS Model&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Day&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Number&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126013611658-1218001757.png" style="zoom:80%;">

<ul>
<li>最终达到一个平衡</li>
</ul>
<h3 id="SEIR模型"><a href="#SEIR模型" class="headerlink" title="SEIR模型"></a>SEIR模型</h3><ul>
<li><p>考虑了病毒的潜伏期(潜伏人群E)，也就是感染病毒后，过了潜伏期就是感染人群了</p>
</li>
<li><p>多了E_0为潜伏者的初始人数，如果是0，那说明开始时有人感染，但是还没有发病，此时这类人不是易感染，但是他们携带病毒</p>
</li>
<li><p>只有经过潜伏期，才能被传染</p>
</li>
<li><p>公式有所变化</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.integrate <span class="keyword">as</span> spi</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.6</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0.1</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">Te = <span class="number">14</span>  <span class="comment"># Te为疾病潜伏期</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">E_0 = <span class="number">0</span>  <span class="comment"># E_0为潜伏者的初始人数</span></span><br><span class="line">R_0 = <span class="number">0</span>  <span class="comment"># R_0为治愈者的初始人数</span></span><br><span class="line">S_0 = N - I_0 - R_0 - E_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br><span class="line">INI = (S_0, E_0, I_0, R_0)  <span class="comment"># INI为初始状态下的数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcSEIR</span>(<span class="params">inivalue, _</span>):</span></span><br><span class="line">    Y = np.zeros(<span class="number">4</span>)</span><br><span class="line">    X = inivalue</span><br><span class="line">    Y[<span class="number">0</span>] = -(beta * X[<span class="number">0</span>] * X[<span class="number">2</span>]) / N  <span class="comment"># 易感个体变化</span></span><br><span class="line">    Y[<span class="number">1</span>] = (beta * X[<span class="number">0</span>] * X[<span class="number">2</span>] / N - X[<span class="number">1</span>] / Te)  <span class="comment"># 潜伏个体变化</span></span><br><span class="line">    Y[<span class="number">2</span>] = X[<span class="number">1</span>] / Te - gamma * X[<span class="number">2</span>]  <span class="comment"># 感染个体变化</span></span><br><span class="line">    Y[<span class="number">3</span>] = gamma * X[<span class="number">2</span>]  <span class="comment"># 治愈个体变化</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    T_range = np.arange(<span class="number">0</span>, T + <span class="number">1</span>)</span><br><span class="line">    RES = spi.odeint(funcSEIR, INI, T_range)</span><br><span class="line">    plt.plot(RES[:, <span class="number">0</span>], color=<span class="string">&#x27;darkblue&#x27;</span>, label=<span class="string">&#x27;Susceptible&#x27;</span>, marker=</span><br><span class="line">    <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">1</span>], color=<span class="string">&#x27;orange&#x27;</span>, label=<span class="string">&#x27;Exposed&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">2</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Infection&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">3</span>], color=<span class="string">&#x27;green&#x27;</span>, label=<span class="string">&#x27;Recovery&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;SEIR Model&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Day&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Number&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126014328064-1899684542.png" style="zoom:80%;">

<ul>
<li>潜伏期的人会比感染人群先到达峰值，最终都可以治愈</li>
</ul>
<h3 id="SEIRS模型"><a href="#SEIRS模型" class="headerlink" title="SEIRS模型"></a>SEIRS模型</h3><ul>
<li><p>考虑了抗体持续时间</p>
</li>
<li><p>一般多了潜伏期的话，传染率系数会有所增加，上面的SEIR也是同理</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.integrate <span class="keyword">as</span> spi</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">N = <span class="number">10000</span>  <span class="comment"># N为人群总数</span></span><br><span class="line">beta = <span class="number">0.6</span>  <span class="comment"># β为传染率系数</span></span><br><span class="line">gamma = <span class="number">0.1</span>  <span class="comment"># gamma为恢复率系数</span></span><br><span class="line">Ts = <span class="number">7</span>  <span class="comment"># Ts为抗体持续时间</span></span><br><span class="line">Te = <span class="number">14</span>  <span class="comment"># Te为疾病潜伏期</span></span><br><span class="line">I_0 = <span class="number">1</span>  <span class="comment"># I_0为感染者的初始人数</span></span><br><span class="line">E_0 = <span class="number">0</span>  <span class="comment"># E_0为潜伏者的初始人数</span></span><br><span class="line">R_0 = <span class="number">0</span>  <span class="comment"># R_0为治愈者的初始人数</span></span><br><span class="line">S_0 = N - I_0 - R_0 - E_0  <span class="comment"># S_0为易感染者的初始人数</span></span><br><span class="line">T = <span class="number">150</span>  <span class="comment"># T为传播时间</span></span><br><span class="line">INI = (S_0, E_0, I_0, R_0)  <span class="comment"># INI为初始状态下的数组</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funcSEIRS</span>(<span class="params">inivalue, _</span>):</span></span><br><span class="line">    Y = np.zeros(<span class="number">4</span>)</span><br><span class="line">    X = inivalue</span><br><span class="line">    Y[<span class="number">0</span>] = -(beta * X[<span class="number">0</span>] * X[<span class="number">2</span>]) / N + X[<span class="number">3</span>] / Ts  <span class="comment"># 易感个体变化</span></span><br><span class="line">    Y[<span class="number">1</span>] = (beta * X[<span class="number">0</span>] * X[<span class="number">2</span>] / N - X[<span class="number">1</span>] / Te)  <span class="comment"># 潜伏个体变化</span></span><br><span class="line">    Y[<span class="number">2</span>] = X[<span class="number">1</span>] / Te - gamma * X[<span class="number">2</span>]  <span class="comment"># 感染个体变化</span></span><br><span class="line">    Y[<span class="number">3</span>] = gamma * X[<span class="number">2</span>] - X[<span class="number">3</span>] / Ts  <span class="comment"># 治愈个体变化</span></span><br><span class="line">    <span class="keyword">return</span> Y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    T_range = np.arange(<span class="number">0</span>, T + <span class="number">1</span>)</span><br><span class="line">    RES = spi.odeint(funcSEIRS, INI, T_range)</span><br><span class="line">    plt.plot(RES[:, <span class="number">0</span>], color=<span class="string">&#x27;darkblue&#x27;</span>, label=<span class="string">&#x27;Susceptible&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">1</span>], color=<span class="string">&#x27;orange&#x27;</span>, label=<span class="string">&#x27;Exposed&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">2</span>], color=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;Infection&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.plot(RES[:, <span class="number">3</span>], color=<span class="string">&#x27;green&#x27;</span>, label=<span class="string">&#x27;Recovery&#x27;</span>, marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;SETRS Model&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Day&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Number&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126015400873-268245591.png" style="zoom:80%;">

<ul>
<li>潜伏期的人先到峰值，然后是易感染者，然后是治愈者，他们最终会达到平衡稳定</li>
</ul>
<h1 id="图论"><a href="#图论" class="headerlink" title="图论"></a>图论</h1><h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><h3 id="解法1-常用"><a href="#解法1-常用" class="headerlink" title="解法1(常用)"></a>解法1(常用)</h3><ul>
<li>只需要给出带有权值的邻接矩阵即可求出最短路径和最短距离</li>
<li>需要改变的第54行邻接矩阵的权值和65行的起点和终点，注意21行是从0还是1开始</li>
<li>有向边和无向边的混合均可使用</li>
<li><code>g = defaultdict(list)</code>是得到一个元素全是list类型的字典</li>
<li>举例<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126144816051-2026015349.png" style="zoom: 60%;"></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dijkstra</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">from</span> heapq <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">inf = <span class="number">99999</span>  <span class="comment"># 不连通值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_graph</span>(<span class="params">mtx_graph</span>):</span></span><br><span class="line">    m_n = <span class="built_in">len</span>(mtx_graph)  <span class="comment"># 带权连接矩阵的阶数</span></span><br><span class="line">    edges = []  <span class="comment"># 保存连通的两个点之间的距离(点A、点B、距离)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m_n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m_n):</span><br><span class="line">            <span class="keyword">if</span> i != j <span class="keyword">and</span> mtx_graph[i][j] != inf:</span><br><span class="line">                edges.append((i, j, mtx_graph[i][j]))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> edges</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dijkstra</span>(<span class="params">edges, from_node, to_node</span>):</span></span><br><span class="line">    go_path = []</span><br><span class="line">    to_node = to_node - <span class="number">1</span> <span class="comment"># 看情况，如果是从1开始的就减一</span></span><br><span class="line">    g = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> l, r, c <span class="keyword">in</span> edges:</span><br><span class="line">        g[l].append((c, r))</span><br><span class="line">    q, seen = [(<span class="number">0</span>, from_node - <span class="number">1</span>, ())], <span class="built_in">set</span>()</span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        (cost, v1, path) = heappop(q)  <span class="comment"># 堆弹出当前路径最小成本</span></span><br><span class="line">        <span class="keyword">if</span> v1 <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">            seen.add(v1)</span><br><span class="line">            path = (v1, path)</span><br><span class="line">            <span class="keyword">if</span> v1 == to_node:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">for</span> c, v2 <span class="keyword">in</span> g.get(v1, ()):</span><br><span class="line">                <span class="keyword">if</span> v2 <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">                    heappush(q, (cost + c, v2, path))</span><br><span class="line">    <span class="keyword">if</span> v1 != to_node:  <span class="comment"># 无法到达</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">float</span>[<span class="string">&#x27;inf&#x27;</span>], []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(path) &gt; <span class="number">0</span>:</span><br><span class="line">        left = path[<span class="number">0</span>]</span><br><span class="line">        go_path.append(left)</span><br><span class="line">        right = path[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(right) &gt; <span class="number">0</span>:</span><br><span class="line">            left = right[<span class="number">0</span>]</span><br><span class="line">            go_path.append(left)</span><br><span class="line">            right = right[<span class="number">1</span>]</span><br><span class="line">        go_path.reverse()  <span class="comment"># 逆序变换</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(go_path)):  <span class="comment"># 标号加1</span></span><br><span class="line">            go_path[i] = go_path[i] + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> cost, go_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    mtx_graph = [[<span class="number">0</span>, <span class="number">1</span>, inf, <span class="number">3</span>, inf, inf, inf, inf, inf],</span><br><span class="line">                 [<span class="number">1</span>, <span class="number">0</span>, <span class="number">5</span>, inf, <span class="number">2</span>, inf, inf, inf, inf],</span><br><span class="line">                 [inf, inf, <span class="number">0</span>, <span class="number">1</span>, inf, <span class="number">6</span>, inf, inf, inf],</span><br><span class="line">                 [inf, inf, inf, <span class="number">0</span>, inf, <span class="number">7</span>, inf, <span class="number">9</span>, inf],</span><br><span class="line">                 [inf, <span class="number">2</span>, <span class="number">3</span>, inf, <span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>, inf, <span class="number">8</span>],</span><br><span class="line">                 [inf, inf, <span class="number">6</span>, <span class="number">7</span>, inf, <span class="number">0</span>, inf, <span class="number">2</span>, inf],</span><br><span class="line">                 [inf, inf, inf, inf, inf, <span class="number">1</span>, <span class="number">0</span>, inf, <span class="number">3</span>],</span><br><span class="line">                 [inf, inf, inf, inf, inf, inf, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">                 [inf, inf, inf, inf, <span class="number">8</span>, inf, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>]]</span><br><span class="line"></span><br><span class="line">    edges = init_graph(mtx_graph)</span><br><span class="line">    length, path = dijkstra(edges, <span class="number">1</span>, <span class="number">9</span>)</span><br><span class="line">    print(<span class="string">&#x27;最短距离为：&#x27;</span> + <span class="built_in">str</span>(length))</span><br><span class="line">    print(<span class="string">&#x27;前进路径为：&#x27;</span> + <span class="built_in">str</span>(path))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">最短距离为：8</span><br><span class="line">前进路径为：[1, 2, 5, 7, 9]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<h3 id="解法2"><a href="#解法2" class="headerlink" title="解法2"></a>解法2</h3><ul>
<li>输入是一个包含每个点与其他点联系和权值的字典</li>
<li>下面是无向边的例子，适合无向边</li>
<li>需要修改的是51的联系，62的起点，66行的起点和终点</li>
<li><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126144528055-511872856.png" style="zoom:67%;">

</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line">Max = <span class="number">99999999</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 有点像BFS的思想</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dijktestra</span>(<span class="params">graph, start</span>):</span></span><br><span class="line">    queue = []  <span class="comment"># 优先队列</span></span><br><span class="line">    heapq.heappush(queue, (<span class="number">0</span>, start))</span><br><span class="line">    visited = <span class="built_in">set</span>()</span><br><span class="line">    path = &#123;start: <span class="literal">None</span>&#125;  <span class="comment"># 记录该点的上一个点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 先把一开始到达的所有路径距离设最大</span></span><br><span class="line">    distance = &#123;start: <span class="number">0</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> vertex <span class="keyword">in</span> graph:</span><br><span class="line">        <span class="keyword">if</span> vertex != start:</span><br><span class="line">            distance[vertex] = Max</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(queue):</span><br><span class="line">        <span class="comment"># 取出的当前在queue的第一个点</span></span><br><span class="line">        pair = heapq.heappop(queue)</span><br><span class="line">        dist = pair[<span class="number">0</span>]</span><br><span class="line">        vertex = pair[<span class="number">1</span>]</span><br><span class="line">        visited.add(vertex)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 该点的所有连接点</span></span><br><span class="line">        nodes = graph[vertex].keys()</span><br><span class="line">        <span class="keyword">for</span> v <span class="keyword">in</span> nodes:</span><br><span class="line">            <span class="keyword">if</span> v <span class="keyword">not</span> <span class="keyword">in</span> visited <span class="keyword">and</span> dist + graph[vertex][v] &lt; distance[v]:</span><br><span class="line">                heapq.heappush(queue, (dist + graph[vertex][v], v))  <span class="comment"># 优先队列会自动把值最小的放在前面</span></span><br><span class="line">                path[v] = vertex  <span class="comment"># 记录上一个点</span></span><br><span class="line">                distance[v] = dist + graph[vertex][v]  <span class="comment"># 更新最小值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> path, distance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_path</span>(<span class="params">path, start, end</span>):</span></span><br><span class="line">    shortest_path = []</span><br><span class="line">    vertex = end</span><br><span class="line">    <span class="keyword">while</span> vertex != path[start]:</span><br><span class="line">        vertex = path[vertex]</span><br><span class="line">        shortest_path.append(vertex)</span><br><span class="line"></span><br><span class="line">    shortest_path.reverse()</span><br><span class="line">    shortest_path.pop(<span class="number">0</span>)</span><br><span class="line">    shortest_path.append(end)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> shortest_path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    graph = &#123;</span><br><span class="line">        <span class="string">&#x27;A&#x27;</span>: &#123;<span class="string">&#x27;B&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;D&#x27;</span>: <span class="number">16</span>, <span class="string">&#x27;I&#x27;</span>: <span class="number">5</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;B&#x27;</span>: &#123;<span class="string">&#x27;A&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;F&#x27;</span>: <span class="number">15</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;C&#x27;</span>: &#123;<span class="string">&#x27;D&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;E&#x27;</span>: <span class="number">15</span>, <span class="string">&#x27;I&#x27;</span>: <span class="number">6</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;D&#x27;</span>: &#123;<span class="string">&#x27;A&#x27;</span>: <span class="number">16</span>, <span class="string">&#x27;C&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;F&#x27;</span>: <span class="number">9</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;E&#x27;</span>: &#123;<span class="string">&#x27;C&#x27;</span>: <span class="number">15</span>, <span class="string">&#x27;H&#x27;</span>: <span class="number">4</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;F&#x27;</span>: &#123;<span class="string">&#x27;B&#x27;</span>: <span class="number">15</span>, <span class="string">&#x27;H&#x27;</span>: <span class="number">30</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;G&#x27;</span>: &#123;<span class="string">&#x27;C&#x27;</span>: <span class="number">25</span>, <span class="string">&#x27;H&#x27;</span>: <span class="number">12</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;H&#x27;</span>: &#123;<span class="string">&#x27;E&#x27;</span>: <span class="number">4</span>, <span class="string">&#x27;F&#x27;</span>: <span class="number">9</span>, <span class="string">&#x27;G&#x27;</span>: <span class="number">12</span>&#125;,</span><br><span class="line">        <span class="string">&#x27;I&#x27;</span>: &#123;<span class="string">&#x27;A&#x27;</span>: <span class="number">5</span>, <span class="string">&#x27;C&#x27;</span>: <span class="number">6</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    path, distance = dijktestra(graph, <span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">    print(path)</span><br><span class="line">    print(distance)</span><br><span class="line"></span><br><span class="line">    shortest_path = show_path(path, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;H&#x27;</span>)</span><br><span class="line">    print(<span class="string">&#x27;shortest_path:&#x27;</span>, shortest_path)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">该点的上一个点： &#123;&#39;A&#39;: None, &#39;B&#39;: &#39;A&#39;, &#39;D&#39;: &#39;A&#39;, &#39;I&#39;: &#39;A&#39;, &#39;C&#39;: &#39;I&#39;, &#39;F&#39;: &#39;B&#39;, &#39;E&#39;: &#39;C&#39;, &#39;H&#39;: &#39;E&#39;, &#39;G&#39;: &#39;H&#39;&#125;</span><br><span class="line">起点到其他各个点的最小距离： &#123;&#39;A&#39;: 0, &#39;B&#39;: 10, &#39;C&#39;: 11, &#39;D&#39;: 16, &#39;E&#39;: 26, &#39;F&#39;: 25, &#39;G&#39;: 42, &#39;H&#39;: 30, &#39;I&#39;: 5&#125;</span><br><span class="line">shortest_path: [&#39;A&#39;, &#39;I&#39;, &#39;C&#39;, &#39;E&#39;, &#39;H&#39;]</span><br></pre></td></tr></table></figure>




<h2 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h2><ul>
<li>通过动态规划求解多源最短路径问题</li>
</ul>
<h4 id="举例-4"><a href="#举例-4" class="headerlink" title="举例"></a>举例</h4><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126144816051-2026015349.png" style="zoom: 60%;">

<ul>
<li>图和上面的图一样，求出从每一个点到其他点的最短距离和路径</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">inf = <span class="number">99999</span>  <span class="comment"># 不连通值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">floyd</span>(<span class="params">graph</span>):</span></span><br><span class="line">    N = <span class="built_in">len</span>(graph)</span><br><span class="line">    A = np.array(graph)</span><br><span class="line">    path = np.zeros((N, N))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">            <span class="keyword">if</span> A[i][j] != inf:</span><br><span class="line">                path[i][j] = j</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">                <span class="keyword">if</span> A[i][k] + A[k][j] &lt; A[i][j]:</span><br><span class="line">                    A[i][j] = A[i][k] + A[k][j]</span><br><span class="line">                    path[i][j] = path[i][k]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">            path[i][j] = path[i][j] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">&#x27;距离 = \n&#x27;</span>, A)</span><br><span class="line">    print(<span class="string">&#x27;路径 = \n&#x27;</span>, path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    mtx_graph = [[<span class="number">0</span>, <span class="number">1</span>, inf, <span class="number">3</span>, inf, inf, inf, inf, inf],</span><br><span class="line">                 [<span class="number">1</span>, <span class="number">0</span>, <span class="number">5</span>, inf, <span class="number">2</span>, inf, inf, inf, inf],</span><br><span class="line">                 [inf, inf, <span class="number">0</span>, <span class="number">1</span>, inf, <span class="number">6</span>, inf, inf, inf],</span><br><span class="line">                 [inf, inf, inf, <span class="number">0</span>, inf, <span class="number">7</span>, inf, <span class="number">9</span>, inf],</span><br><span class="line">                 [inf, <span class="number">2</span>, <span class="number">3</span>, inf, <span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>, inf, <span class="number">8</span>],</span><br><span class="line">                 [inf, inf, <span class="number">6</span>, <span class="number">7</span>, inf, <span class="number">0</span>, inf, <span class="number">2</span>, inf],</span><br><span class="line">                 [inf, inf, inf, inf, inf, <span class="number">1</span>, <span class="number">0</span>, inf, <span class="number">3</span>],</span><br><span class="line">                 [inf, inf, inf, inf, inf, inf, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">                 [inf, inf, inf, inf, <span class="number">8</span>, inf, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>]]</span><br><span class="line">    floyd(mtx_graph)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">距离 &#x3D; </span><br><span class="line"> [[ 0  1  6  3  3  6  5  8  8]</span><br><span class="line"> [ 1  0  5  4  2  5  4  7  7]</span><br><span class="line"> [21 20  0  1 18  6  9  8 10]</span><br><span class="line"> [22 21 13  0 19  7 10  9 11]</span><br><span class="line"> [ 3  2  3  4  0  3  2  5  5]</span><br><span class="line"> [15 14  6  7 12  0  3  2  4]</span><br><span class="line"> [14 13  7  8 11  1  0  3  3]</span><br><span class="line"> [13 12  8  9 10  2  1  0  2]</span><br><span class="line"> [11 10 10 11  8  4  3  2  0]]</span><br><span class="line">路径 &#x3D; </span><br><span class="line"> [[1. 2. 2. 4. 2. 2. 2. 2. 2.]</span><br><span class="line"> [1. 2. 3. 1. 5. 5. 5. 5. 5.]</span><br><span class="line"> [6. 6. 3. 4. 6. 6. 6. 6. 6.]</span><br><span class="line"> [8. 8. 6. 4. 8. 6. 8. 8. 8.]</span><br><span class="line"> [2. 2. 3. 3. 5. 7. 7. 7. 7.]</span><br><span class="line"> [8. 8. 3. 4. 8. 6. 8. 8. 8.]</span><br><span class="line"> [9. 9. 6. 6. 9. 6. 7. 6. 9.]</span><br><span class="line"> [9. 9. 7. 7. 9. 7. 7. 8. 9.]</span><br><span class="line"> [5. 5. 7. 7. 5. 7. 7. 8. 9.]]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<ul>
<li><p>距离，比如1到9的距离为8，即从第1行看到第9列</p>
</li>
<li><p>怎么看最短路径看解释见下图</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126174606468-866209777.png" style="zoom: 67%;">



</li>
</ul>
<h2 id="机场航线设计"><a href="#机场航线设计" class="headerlink" title="机场航线设计"></a>机场航线设计</h2><ul>
<li>图的可视化</li>
<li>数据清洗分析，可参考我那块Kaggle练习</li>
<li>城市可作为图节点</li>
<li>可参考down下来的pdf资料<ul>
<li>找到最密集的点，作为交通枢纽，考虑其他成本、时效性、盈利因素之类的…</li>
</ul>
</li>
</ul>
<h1 id="回归"><a href="#回归" class="headerlink" title="回归"></a>回归</h1><ul>
<li>多元回归、逻辑回归见我之前的blog</li>
<li>也可参考pdf资料</li>
</ul>
<h1 id="差分方程"><a href="#差分方程" class="headerlink" title="差分方程"></a>差分方程</h1><h2 id="递推关系"><a href="#递推关系" class="headerlink" title="递推关系"></a>递推关系</h2><ul>
<li>差分方程建模的关键在于如何得到第<strong>n</strong>组数据与第<strong>n+1</strong>组数据之间的关系</li>
</ul>
<h4 id="举例-5"><a href="#举例-5" class="headerlink" title="举例"></a>举例</h4><h5 id="酵母菌生长模型"><a href="#酵母菌生长模型" class="headerlink" title="酵母菌生长模型"></a><strong>酵母菌生长模型</strong></h5><ul>
<li><p>相类比的还有比如兔子(其他生物)繁殖模型等</p>
</li>
<li><p>如图所示我们用培养基培养细菌时，其数量变化通常会经历这四个时期。 </p>
<p>这个模型针对前三个时期建一个大致的模型： </p>
<p><strong>调整期</strong>、<strong>对数期</strong>、<strong>稳定期</strong></p>
</li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126190430231-1717036362.png"></p>
<ul>
<li><p>数据可以也从文件读入，这里直接写了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    time = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">19</span>)]</span><br><span class="line">    number = [<span class="number">9.6</span>, <span class="number">18.3</span>, <span class="number">29</span>, <span class="number">47.2</span>, <span class="number">71.1</span>, <span class="number">119.1</span>, <span class="number">174.6</span>,</span><br><span class="line">              <span class="number">257.3</span>, <span class="number">350.7</span>, <span class="number">441.0</span>, <span class="number">513.3</span>, <span class="number">559.7</span>, <span class="number">594.8</span>,</span><br><span class="line">              <span class="number">629.4</span>, <span class="number">640.8</span>, <span class="number">651.1</span>, <span class="number">655.9</span>, <span class="number">659.6</span>, <span class="number">661.8</span>]</span><br><span class="line">    plt.title(<span class="string">&#x27;Relationship between time and number&#x27;</span>)  <span class="comment"># 创建标题</span></span><br><span class="line">    plt.xlabel(<span class="string">&#x27;time&#x27;</span>)  <span class="comment"># X轴标签</span></span><br><span class="line">    plt.ylabel(<span class="string">&#x27;number&#x27;</span>)  <span class="comment"># Y轴标签</span></span><br><span class="line">    plt.scatter(time, number)</span><br><span class="line">    plt.plot(time, number)  <span class="comment"># 画图</span></span><br><span class="line">    plt.show()  <span class="comment"># 显示</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126191447722-1250708994.png" style="zoom:80%;">

</li>
</ul>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126191835753-994528864.png" style="zoom: 33%;">



<ul>
<li>Δp：因为横坐标间隔是1，所以相邻纵坐标之差可以当成增速</li>
<li>665是极限总群数量</li>
<li>要求的是k,然后预测下一年</li>
<li>需要修改的是4，17，18行，如果不只是算下一年，那要改40，46行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">Max = <span class="number">665</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取相邻纵坐标的差值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_delta</span>(<span class="params">y_num: <span class="built_in">list</span></span>):</span></span><br><span class="line">    delta_y = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(y_num) - <span class="number">1</span>):</span><br><span class="line">        delta_y.append(y_num[i + <span class="number">1</span>] - y_num[i])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> delta_y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    time = [_ <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">19</span>)]</span><br><span class="line">    number = [<span class="number">9.6</span>, <span class="number">18.3</span>, <span class="number">29</span>, <span class="number">47.2</span>, <span class="number">71.1</span>, <span class="number">119.1</span>, <span class="number">174.6</span>,</span><br><span class="line">              <span class="number">257.3</span>, <span class="number">350.7</span>, <span class="number">441.0</span>, <span class="number">513.3</span>, <span class="number">559.7</span>, <span class="number">594.8</span>,</span><br><span class="line">              <span class="number">629.4</span>, <span class="number">640.8</span>, <span class="number">651.1</span>, <span class="number">655.9</span>, <span class="number">659.6</span>, <span class="number">661.8</span>]</span><br><span class="line"></span><br><span class="line">    plt.title(<span class="string">&#x27;Relationship between time and number&#x27;</span>)  <span class="comment"># 创建标题</span></span><br><span class="line">    plt.xlabel(<span class="string">&#x27;time&#x27;</span>)  <span class="comment"># X轴标签</span></span><br><span class="line">    plt.ylabel(<span class="string">&#x27;number&#x27;</span>)  <span class="comment"># Y轴标签</span></span><br><span class="line">    plt.scatter(time, number)</span><br><span class="line">    plt.plot(time, number)  <span class="comment"># 画图</span></span><br><span class="line">    <span class="comment"># plt.show()  # 显示， 注释掉后，实际曲线和预测曲线泛在同一个图里面对比</span></span><br><span class="line"></span><br><span class="line">    delta_p = get_delta(number)</span><br><span class="line">    number.pop(-<span class="number">1</span>)</span><br><span class="line">    pn = np.array(number)</span><br><span class="line">    f = pn * (Max - pn)</span><br><span class="line">    res = np.polyfit(f, delta_p, <span class="number">1</span>)</span><br><span class="line">    print(res)</span><br><span class="line">    print(<span class="string">&#x27;k = &#x27;</span>, res[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 预测</span></span><br><span class="line">    p0 = number[<span class="number">0</span>]</span><br><span class="line">    p_list = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(time) + <span class="number">1</span>):</span><br><span class="line">        p_list.append(p0)</span><br><span class="line">        p0 = res[<span class="number">0</span>] * (Max - p0) * p0 + p0</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;time&#x27;</span>)  <span class="comment"># X轴标签</span></span><br><span class="line">    plt.ylabel(<span class="string">&#x27;number&#x27;</span>)  <span class="comment"># Y轴标签</span></span><br><span class="line">    plt.title(<span class="string">&#x27;Prediction&#x27;</span>)  <span class="comment"># 创建标题</span></span><br><span class="line">    plt.scatter([_ <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(time) + <span class="number">1</span>)], p_list, c=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    plt.plot(p_list)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ 0.00081448 -0.30791574]</span><br><span class="line">k &#x3D;  0.0008144797937893836</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>




<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126200256933-2071649500.png" style="zoom:80%;">







<h2 id="显式差分"><a href="#显式差分" class="headerlink" title="显式差分"></a>显式差分</h2><ul>
<li>热传导方程，见<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12h411d7Dm?p=8">https://www.bilibili.com/video/BV12h411d7Dm?p=8</a></li>
</ul>
<h2 id="马尔科夫链"><a href="#马尔科夫链" class="headerlink" title="马尔科夫链"></a>马尔科夫链</h2><h4 id="选举投票预测"><a href="#选举投票预测" class="headerlink" title="选举投票预测"></a>选举投票预测</h4><ul>
<li><p>马尔科夫链是由具有以下性质的一系列事件构成的过程： </p>
<ul>
<li><p>一个事件有有限多个结果，称为状态，该过程总是这些状态中的一个； </p>
</li>
<li><p>在过程的每个阶段或者时段，一个特定的结果可以从它现在的状态转移到任何状态，或者保持原状； </p>
</li>
<li><p>每个阶段从一个状态转移到其他状态的概率用一个转移矩阵表示，矩阵每行的各元素在0到1之间，每行的和为1。</p>
</li>
</ul>
</li>
<li><p>选举投票趋势预测 </p>
<ul>
<li><p>以美国大选为例，首先取得过去十次选举的历史数据，然后根据历史数据得到选民意向的转移矩阵，转移矩阵如下</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126201527059-1102395362.png" style="zoom:70%;">
</li>
<li><p>比如，当前状态的共和党转移到下一状态的共和党的概率是0.75，以此类推</p>
<p>即如下关系：</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126201916793-1556439911.png" style="zoom: 50%;">
</li>
<li><p>然后我们可以构造出差分表达式(共和党R，民主党D，独立候选人I)：</p>
<p>也就是下个状态等于前一个状态的所有可能之和</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126202109626-1562639525.png" style="zoom: 50%;">
</li>
<li><p>通过求解差分方程组，预测出选民投票意向的长期趋势</p>
<ul>
<li><p>plt.annotate是标记文本，如</p>
<figure class="highlight plain"><figcaption><span>xy</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line"></span><br><span class="line">    RLIST &#x3D; [1 &#x2F; 3]</span><br><span class="line">    DLIST &#x3D; [1 &#x2F; 3]</span><br><span class="line">    ILIST &#x3D; [1 &#x2F; 3]</span><br><span class="line">    for i in range(40):</span><br><span class="line">        R &#x3D; RLIST[i] * 0.75 + DLIST[i] * 0.20 + ILIST[i] * 0.40</span><br><span class="line">        RLIST.append(R)</span><br><span class="line">        D &#x3D; RLIST[i] * 0.05 + DLIST[i] * 0.60 + ILIST[i] * 0.20</span><br><span class="line">        DLIST.append(D)</span><br><span class="line">        I &#x3D; RLIST[i] * 0.20 + DLIST[i] * 0.20 + ILIST[i] * 0.40</span><br><span class="line">        ILIST.append(I)</span><br><span class="line">        plt.plot(RLIST)</span><br><span class="line">        plt.plot(DLIST)</span><br><span class="line">        plt.plot(ILIST)</span><br><span class="line">        plt.xlabel(&#39;Time&#39;)</span><br><span class="line">        plt.ylabel(&#39;Voting percent&#39;)</span><br><span class="line">        plt.annotate(&#39;DemocraticParty&#39;, xy&#x3D;(5, 0.2))</span><br><span class="line">        plt.annotate(&#39;RepublicanParty&#39;, xy&#x3D;(5, 0.5))</span><br><span class="line">        plt.annotate(&#39;IndependentCandidate&#39;, xy&#x3D;(5, 0.25))</span><br><span class="line">        plt.show()</span><br><span class="line">        print(RLIST, DLIST, ILIST)</span><br><span class="line"></span><br><span class="line">    print(&#39;预测的最后一年：RLIST: &#123;&#125;, DLIST: &#123;&#125;, ILIST: &#123;&#125;&#39;.format(RLIST[-1], DLIST[-1], ILIST[-1]))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>遍历画出每一年，这是最后一年的图</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">......</span><br><span class="line">预测的最后一年：RLIST: 0.5555555555483689, DLIST: 0.1944444444516318, ILIST: 0.2500000000000002</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210126203544341-212524774.png" style="zoom:80%;">

<ul>
<li><p>最后得到的长期趋势是： </p>
<p>56%的人选共和党、 </p>
<p>19%的人选民主党、 </p>
<p>25%的人选独立候选人</p>
</li>
</ul>
</li>
</ul>
<h1 id="灰色与模糊"><a href="#灰色与模糊" class="headerlink" title="灰色与模糊"></a>灰色与模糊</h1><h2 id="多层模糊评价"><a href="#多层模糊评价" class="headerlink" title="多层模糊评价"></a>多层模糊评价</h2><ul>
<li>见资料</li>
</ul>
<h2 id="模糊c均值聚类"><a href="#模糊c均值聚类" class="headerlink" title="模糊c均值聚类"></a>模糊c均值聚类</h2><ul>
<li>原理见资料</li>
<li>聚类的算法实现参考我之前sklearn里面的聚类算法实现就行了</li>
</ul>
<h2 id="灰色预测-经典常用"><a href="#灰色预测-经典常用" class="headerlink" title="灰色预测(经典常用)"></a>灰色预测(经典常用)</h2><ul>
<li><p>灰色预测是用灰色模式GM(1,1)来进行定量分析的，通常分为以下几类： </p>
<ul>
<li><p>灰色时间序列预测。用等时距观测到的反映预测对象特征的一系列数量（如产量、销量、人口数量、存款数量、利率等）构造灰色预测模型，预测未来某一时刻的特征量，或者达到某特征量的时间。 </p>
</li>
<li><p>畸变预测（灾变预测）。通过模型预测异常值出现的时刻，预测异常值什么时候出现在特定时区内。 </p>
</li>
<li><p>波形预测，或拓扑预测，通过灰色模型预测事物未来变动的轨迹。 </p>
</li>
<li><p>系统预测，对系统行为特征指标建立一族相互关联的灰色预测理论模型，在预测系统整体变化的同时，预测系统各个环节的变化。 </p>
</li>
</ul>
</li>
<li><p>上述灰色预测方法的共同特征是： </p>
<ul>
<li><p><strong>允许少数据预测</strong>； </p>
</li>
<li><p>允许对灰因果律实践进行预测，例如： </p>
<ul>
<li><p>灰因白果律事件：粮食生产预测(就是结果产量是已知的，中间受什么因素影响是未知的)</p>
</li>
<li><p>白因灰果律事件：开放项目前景预测(过程已知，但是结果前景未知)</p>
</li>
</ul>
</li>
<li><p>具有可检验性（事前检验：建模可行性级比检验；模型检验：建模精度检验； </p>
</li>
</ul>
<p>预测检验：预测滚动检验）</p>
</li>
</ul>
<ul>
<li>模型理论部分见资料或者网上看</li>
</ul>
<h3 id="算法步骤"><a href="#算法步骤" class="headerlink" title="算法步骤"></a>算法步骤</h3><ul>
<li><p>要使用灰色预测模型，首先看看适不适用</p>
</li>
<li><p>如果级比都落在可容覆盖范围内，就直接用</p>
<p>否则做平移变换</p>
</li>
</ul>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127004120044-586264331.png" style="zoom: 50%;">

<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127004905362-1976707119.png" style="zoom: 67%;">



<ul>
<li>代码部分是可以使用cuda加速的</li>
<li>只需改87行的输入数据和93行的预测个数m</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch <span class="keyword">as</span> th</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GM</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 判断是否可用 gpu 编程 , 大量级计算使用GPU</span></span><br><span class="line">        self._is_gpu = <span class="literal">False</span>  <span class="comment"># th.cuda.is_available()</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, dt: <span class="built_in">list</span> <span class="keyword">or</span> np.ndarray</span>):</span></span><br><span class="line">        self._df: th.Tensor = th.from_numpy(np.array(dt, dtype=np.float32))</span><br><span class="line">        <span class="keyword">if</span> self._is_gpu:</span><br><span class="line">            self._df.cuda()</span><br><span class="line">        self._n: <span class="built_in">int</span> = <span class="built_in">len</span>(self._df)</span><br><span class="line">        self._x, self._max_value = self._sigmod(self._df)</span><br><span class="line">        z: th.Tensor = self._next_to_mean(th.cumsum(self._x, dim=<span class="number">0</span>))</span><br><span class="line">        self.coef: th.Tensor = self._coefficient(self._x, z)</span><br><span class="line">        <span class="keyword">del</span> z</span><br><span class="line">        self._x0: th.Tensor = self._x[<span class="number">0</span>]</span><br><span class="line">        self._pre: th.Tensor = self._pred()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 归一化</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_sigmod</span>(<span class="params">self, x: th.Tensor</span>):</span></span><br><span class="line">        _maxv: th.Tensor = th.<span class="built_in">max</span>(x)</span><br><span class="line">        <span class="keyword">return</span> th.div(x, _maxv), _maxv</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算紧邻均值数列</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_next_to_mean</span>(<span class="params">self, x_1: th.Tensor</span>):</span></span><br><span class="line">        z: th.Tensor = th.zeros(self._n - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> self._is_gpu:</span><br><span class="line">            z.cuda()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, self._n):  <span class="comment"># 下标从0开始，取不到最大值</span></span><br><span class="line">            z[i - <span class="number">1</span>] = <span class="number">0.5</span> * x_1[i] + <span class="number">0.5</span> * x_1[i - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> z</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算系数 a,b</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_coefficient</span>(<span class="params">self, x: th.Tensor, z: th.Tensor</span>):</span></span><br><span class="line">        B: th.Tensor = th.stack((-<span class="number">1</span> * z, th.ones(self._n - <span class="number">1</span>)), dim=<span class="number">1</span>)</span><br><span class="line">        Y: th.Tensor = th.tensor(x[<span class="number">1</span>:], dtype=th.float32).reshape((-<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> self._is_gpu:</span><br><span class="line">            B.cuda()</span><br><span class="line">            Y.cuda()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 返回的是a和b的向量转置，第一个是a 第二个是b；</span></span><br><span class="line">        <span class="keyword">return</span> th.matmul(th.matmul(th.inverse(th.matmul(B.t(), B)), B.t()), Y)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_pred</span>(<span class="params">self, start: <span class="built_in">int</span> = <span class="number">1</span>, end: <span class="built_in">int</span> = <span class="number">0</span></span>):</span></span><br><span class="line">        les: <span class="built_in">int</span> = self._n + end</span><br><span class="line">        resut: th.Tensor = th.zeros(les)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self._is_gpu:</span><br><span class="line">            resut.cuda()</span><br><span class="line">        resut[<span class="number">0</span>] = self._x0</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, les):</span><br><span class="line">            resut[i] = (self._x0 - (self.coef[<span class="number">1</span>] / self.coef[<span class="number">0</span>])) * \</span><br><span class="line">                       (<span class="number">1</span> - th.exp(self.coef[<span class="number">0</span>])) * th.exp(-<span class="number">1</span> * self.coef[<span class="number">0</span>] * (i))</span><br><span class="line">        <span class="keyword">del</span> les</span><br><span class="line">        <span class="keyword">return</span> resut</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算绝对误差</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">confidence</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">round</span>((th.<span class="built_in">sum</span>(th.<span class="built_in">abs</span>(th.div((self._x - self._pre), self._x))) / self._n).item(), <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 预测个数，默认个数大于等于0，</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span>(<span class="params">self, m: <span class="built_in">int</span> = <span class="number">1</span>, decimals: <span class="built_in">int</span> = <span class="number">4</span></span>):</span></span><br><span class="line">        y_pred: th.Tensor = th.mul(self._pre, self._max_value)</span><br><span class="line">        y_pred_ = th.zeros(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> m &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;预测个数需大于等于0&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> m &gt; <span class="number">0</span>:</span><br><span class="line">            y_pred_: th.Tensor = self._pred(self._n, m)[-m:].mul(self._max_value)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> self._is_gpu:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> _: <span class="built_in">round</span>(_, decimals), y_pred.cpu().numpy().tolist()))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> _: <span class="built_in">round</span>(_, decimals), y_pred.numpy().tolist()))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># cat 拼接 0 x水平拼接，1y垂直拼接</span></span><br><span class="line">        result: th.Tensor = th.cat((y_pred, y_pred_), dim=<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">del</span> y_pred, y_pred_</span><br><span class="line">        <span class="keyword">if</span> self._is_gpu:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> _: <span class="built_in">round</span>(_, decimals), result.cpu().numpy().tolist()))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> _: <span class="built_in">round</span>(_, decimals), result.numpy().tolist()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    ls = np.arange(<span class="number">91</span>, <span class="number">100</span>, <span class="number">2</span>)  <span class="comment"># ls是原始的值</span></span><br><span class="line">    print(<span class="built_in">type</span>(ls))</span><br><span class="line">    gm = GM()</span><br><span class="line">    gm.fit(ls)</span><br><span class="line">    print(<span class="string">&#x27;绝对误差: &#x27;</span>, gm.confidence())</span><br><span class="line">    print(<span class="string">&#x27;原始值: &#x27;</span>, ls)</span><br><span class="line">    print(<span class="string">&#x27;预测: &#x27;</span>, gm.predict(m=<span class="number">2</span>))  <span class="comment"># m是2代表要预测后面两个值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &#39;numpy.ndarray&#39;&gt;</span><br><span class="line">绝对误差:  0.0002</span><br><span class="line">原始值:  [91 93 95 97 99]</span><br><span class="line">预测:  [91.0, 93.0178, 94.9758, 96.9751, 99.0164, 101.1007, 103.2289]</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>


<h1 id="蒙特卡罗"><a href="#蒙特卡罗" class="headerlink" title="蒙特卡罗"></a>蒙特卡罗</h1><h2 id="蒙特卡罗算法"><a href="#蒙特卡罗算法" class="headerlink" title="蒙特卡罗算法"></a>蒙特卡罗算法</h2><ul>
<li><p>由冯.诺依曼提出来的</p>
</li>
<li><p>蒙特·卡罗(Monte Carlo method)又称统计模拟方法，一种以概率统计理论为指导的数值计算方法。是指使用随机数(或者伪随机数)来解决很多计算问题的方法。</p>
</li>
<li><p>基本思想</p>
<p>当所求解问题是某种随机事件出现的概率，或者是某个随机变量的期望值时，通过某种“实验”的方法，以这种事件出现的频率估计这一随机事件的概率，或者得到这个随机变量的某些数字特征，并将其作为问题的解。</p>
</li>
</ul>
<h4 id="举例-6"><a href="#举例-6" class="headerlink" title="举例"></a>举例</h4><ul>
<li><p><strong>蒙特卡罗方法求圆周率</strong> </p>
<p>基本思想：在图中区域产生足够多的随机数点，然后计算落在圆内的点的个数与总个数的比值再乘以4，就是圆周率。</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127142359134-1130879298.png" style="zoom: 67%;">
</li>
<li><p>random.random()得到的是0到1之间的(伪)随机数，若要某个整数范围，则用random.randint(a, b)，是有包括a和b的</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    M = <span class="built_in">input</span>(<span class="string">&#x27;请输入一个较大的整数&#x27;</span>)</span><br><span class="line">    N = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(M)):</span><br><span class="line">        x = random.random()</span><br><span class="line">        y = random.random()</span><br><span class="line">        <span class="keyword">if</span> math.sqrt(x ** <span class="number">2</span> + y ** <span class="number">2</span>) &lt; <span class="number">1</span>:</span><br><span class="line">            N += <span class="number">1</span></span><br><span class="line">            pi = <span class="number">4</span> * N / <span class="built_in">int</span>(M)</span><br><span class="line">            <span class="comment"># print(pi)</span></span><br><span class="line">    print(pi)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请输入一个较大的整数9999999</span><br><span class="line">3.1417339141733915</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>


<ul>
<li><p><strong>蒙特卡罗求定积分</strong></p>
<p>利用python计算函数y=x**2在[0,1]区间的定积分 </p>
<p>基本思想：和上例相似</p>
<p><img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127145751634-1347413778.png"></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">求f(x) = x^2的定积分</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入一个较大的整数:&#x27;</span>))</span><br><span class="line">    m = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        x = random.random()</span><br><span class="line">        y = random.random()</span><br><span class="line">        <span class="keyword">if</span> y &lt; x ** <span class="number">2</span>:  <span class="comment"># 找到落在f(x)下面的点</span></span><br><span class="line">            m += <span class="number">1</span></span><br><span class="line">    R = m / n <span class="comment"># 这里因为总面积是1所以省略乘以1了</span></span><br><span class="line">    print(R)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请输入一个较大的整数:999999</span><br><span class="line">0.33292533292533294</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>


<h2 id="三门问题"><a href="#三门问题" class="headerlink" title="三门问题"></a>三门问题</h2><ul>
<li><p>背景</p>
<p>三门问题（Monty Hall probelm）亦称为蒙提霍尔问题，出自美国电视游戏节目Let’s Make a Deal。参赛者会看见三扇关闭了的门，其中一扇的后面有一辆汽车，选中后面有车的那扇门可赢得该汽车，另外两扇门则各藏有一只山羊。当参赛者选定了一扇门，但未去开启它的时候，节目主持人开启剩下两扇门的其中一扇，露出其中一只山羊。主持人其后问参赛者要不要换另一扇仍然关上的门。问题是：换另一扇门是否会增加参赛者赢得汽车的几率？如果严格按照上述条件，即主持人清楚地知道，自己打开的那扇门后面是羊，那么答案是会。不换门的话，赢得汽车的几率是1/3,换门的话，赢得汽车的几率是2/3</p>
</li>
<li><p>应用蒙特卡罗重点在使用随机数来模拟类似于赌博问题的赢率问题，通过多次模拟得到所要计算值的模拟值</p>
</li>
<li><p>解决思路：</p>
<p>在三门问题中，用0、1、2分代表三扇门的编号，在[0,2]之间随机生成一个整数代表奖品所在门的编号prize，再次在[0,2]之间随机生成一个整数代表参赛者所选择的门的编号guess。用变量change代表游戏中的换门(true)与不换门(false)</p>
<img src="https://img2020.cnblogs.com/blog/2134757/202101/2134757-20210127152448229-250150715.png" style="zoom:80%;">





</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">play</span>(<span class="params">change</span>):</span></span><br><span class="line">    prize = random.randint(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">    guess = random.randint(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">if</span> prize == guess:</span><br><span class="line">        <span class="keyword">if</span> change:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> change:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">winRate</span>(<span class="params">change, N</span>):</span></span><br><span class="line">    win = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, N):</span><br><span class="line">        <span class="keyword">if</span> play(change):</span><br><span class="line">            win = win + <span class="number">1</span></span><br><span class="line">            <span class="comment"># print(&#x27;中奖率为: &#x27;)</span></span><br><span class="line">            <span class="comment"># print(win / N)</span></span><br><span class="line">    print(<span class="string">&#x27;中奖率为: &#x27;</span>)</span><br><span class="line">    print(win / N)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    N = <span class="number">100000</span></span><br><span class="line">    print(<span class="string">&#x27;玩&#x27;</span> + <span class="built_in">str</span>(N) + <span class="string">&#x27;次，每一次都换门:&#x27;</span>)</span><br><span class="line">    winRate(<span class="literal">True</span>, N)</span><br><span class="line">    print()</span><br><span class="line">    print(<span class="string">&#x27;玩&#x27;</span> + <span class="built_in">str</span>(N) + <span class="string">&#x27;次，每一次都不换门:&#x27;</span>)</span><br><span class="line">    winRate(<span class="literal">False</span>, N)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">玩100000次，每一次都换门:</span><br><span class="line">中奖率为: </span><br><span class="line">0.66748</span><br><span class="line"></span><br><span class="line">玩100000次，每一次都不换门:</span><br><span class="line">中奖率为: </span><br><span class="line">0.33008</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>
<h2 id="巧克力豆问题"><a href="#巧克力豆问题" class="headerlink" title="巧克力豆问题"></a>巧克力豆问题</h2><ul>
<li>见资料</li>
</ul>
<h1 id="时间序列"><a href="#时间序列" class="headerlink" title="时间序列"></a>时间序列</h1><ul>
<li><p>时序问题也可使用神经网络里面的LSTM(长短时记忆)</p>
</li>
<li><p>预测的是近期的，不是预测长远的(长远预测需要挖掘更多特征，深度学习那块的)</p>
</li>
<li><p>均方差：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line">rms = sqrt(mean_squared_error(test, pred))<span class="comment"># 把实际和预测的放进去</span></span><br><span class="line">print(rms)</span><br></pre></td></tr></table></figure></li>
<li><p>见<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12h411d7Dm?p=10">https://www.bilibili.com/video/BV12h411d7Dm?p=10</a></p>
</li>
</ul>
<h2 id="简单指数平滑法"><a href="#简单指数平滑法" class="headerlink" title="简单指数平滑法"></a>简单指数平滑法</h2><ul>
<li>导入数据</li>
<li>切分数据</li>
<li>代码适当修改和测试</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> statsmodels.tsa.api <span class="keyword">import</span> SimpleExpSmoothing</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    df = pd.read_csv(<span class="string">&#x27;train.csv&#x27;</span>)</span><br><span class="line">    train = df[<span class="number">0</span>:<span class="number">10392</span>]</span><br><span class="line">    test = df[<span class="number">10392</span>:]</span><br><span class="line">    pred = test.copy()</span><br><span class="line">    fit = SimpleExpSmoothing(np.asarray(train[<span class="string">&#x27;列名1&#x27;</span>])).fit(smoothing_level=<span class="number">0.6</span>, optimized=<span class="literal">False</span>)</span><br><span class="line">    pred[<span class="string">&#x27;列名2&#x27;</span>] = fit.forecast(<span class="built_in">len</span>(test))  <span class="comment"># 需要预测多长</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 画出来</span></span><br><span class="line">    plt.figure(figsize=(<span class="number">16</span>, <span class="number">8</span>))</span><br><span class="line">    plt.plot(train[<span class="string">&#x27;列名1&#x27;</span>], label=<span class="string">&#x27;Train&#x27;</span>)</span><br><span class="line">    plt.plot(test[<span class="string">&#x27;列名1&#x27;</span>], label=<span class="string">&#x27;Test&#x27;</span>)</span><br><span class="line">    plt.plot(pred[<span class="string">&#x27;列名2&#x27;</span>], label=<span class="string">&#x27;列名2&#x27;</span>)</span><br><span class="line">    plt.legend(loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 评估</span></span><br><span class="line">    rms = sqrt(mean_squared_error(test[<span class="string">&#x27;列名1&#x27;</span>], pred))</span><br><span class="line">    print(rms)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="霍尔特线性趋势法"><a href="#霍尔特线性趋势法" class="headerlink" title="霍尔特线性趋势法"></a><strong>霍尔特线性趋势法</strong></h2><ul>
<li><p>考虑到数据集变化趋势的方法就叫做霍尔特线性趋势法，任何呈现某种趋势(比如商上升趋势)的数据集都可以用霍尔特线性趋势法用于预测</p>
</li>
<li><p>先看看是否呈现某种趋势</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm sm.tsa.seasonal_decompose(train[<span class="string">&#x27;xxx&#x27;</span>]).plot() </span><br><span class="line">result = sm.tsa.stattools.adfuller(train[<span class="string">&#x27;xxx&#x27;</span>]) </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<ul>
<li>如果是的话就可以使用</li>
</ul>
</li>
<li><p>代码相对上面只需改动这两句，其他适当改即可</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> statsmodels.tsa.api <span class="keyword">import</span> Holt</span><br><span class="line">fit = Holt(np.asarray(train[<span class="string">&#x27;xxx&#x27;</span>])).fit(smoothing_level=<span class="number">0.3</span>, smoothing_slope=<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>


<h2 id="Holt-Winters季节性预测模型"><a href="#Holt-Winters季节性预测模型" class="headerlink" title="Holt-Winters季节性预测模型"></a>Holt-Winters季节性预测模型</h2><ul>
<li>体现在季节性<ul>
<li>比如一个水果店的销售情况，在夏季收入远高于其他季节</li>
</ul>
</li>
<li>只需改变一点代码,选择了seasonal_period=7作为每周重复数据</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> statsmodels.tsa.api <span class="keyword">import</span> ExponentialSmoothing</span><br><span class="line">fit1 = ExponentialSmoothing(np.asarray(train[<span class="string">&#x27;xxx&#x27;</span>]), seasonal_periods=<span class="number">7</span>, trend=<span class="string">&#x27;add&#x27;</span>, seasonal=<span class="string">&#x27;add&#x27;</span>, ).fit()</span><br></pre></td></tr></table></figure>


<h2 id="自回归移动平均模型（ARIMA）"><a href="#自回归移动平均模型（ARIMA）" class="headerlink" title="自回归移动平均模型（ARIMA）"></a><strong>自回归移动平均模型（ARIMA）</strong></h2><ul>
<li>指数平滑模型都是基于数据中的趋势和季节性的描述，而自回归移动平均模型的目标是描述数据中彼此之间的关系。ARIMA的一个优化版就是季节性ARIMA。它像Holt-Winters季节性预测模型一样，也把数据集的季节性考虑在内。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm</span><br><span class="line">pred = test.copy() </span><br><span class="line">fit1 = sm.tsa.statespace.SARIMAX(train.xxx, order=(<span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>), seasonal_order=(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">7</span>)).fit() pred[<span class="string">&#x27;SARIMA&#x27;</span>]=fit1.predict(start=<span class="string">&quot;20xx-xx-xx&quot;</span>,end=<span class="string">&quot;20xx-xx- xx&quot;</span>,dynamic=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>参考：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12h411d7Dm?p=12">https://www.bilibili.com/video/BV12h411d7Dm?p=12</a></p>
</li>
<li><p>时间序列最后都要评估一下</p>
</li>
</ul>
<h1 id="SVM"><a href="#SVM" class="headerlink" title="SVM"></a>SVM</h1><ul>
<li>见之前的资料sklearn</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clf = svm.SVC(C=<span class="number">0.8</span>, kernel=<span class="string">&#x27;rbf&#x27;</span>, gamma=<span class="number">20</span>, decision_function_shape=<span class="string">&#x27;ovr&#x27;</span>)</span><br><span class="line">clf.fit(x_train, y_train.ravel())</span><br></pre></td></tr></table></figure>
<ul>
<li><p>调参，参数见资料</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/JimouChen/python-application/blob/master/PythonLearning/MathematicalModeling/note.md">我的更新</a></p>
</li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div>Welcome to reward</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    欢迎打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatPay.png" alt="jmchen 微信支付">
        <p>微信支付</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>jmchen
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://jimouchen.github.io/2021/01/26/PythonMathematicalModeling/" title="Python数学建模相关实现">https://jimouchen.github.io/2021/01/26/PythonMathematicalModeling/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" rel="tag"><i class="fa fa-bookmark"></i> Python数学建模</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/21/JavaWebSecond-handCar/" rel="prev" title="JavaWeb实现网上二手车交易平台小项目">
      <i class="fa fa-chevron-left"></i> JavaWeb实现网上二手车交易平台小项目
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/28/hexoInitProblem/" rel="next" title="解决hexo init 一直停在"checking installable status"的问题">
      解决hexo init 一直停在"checking installable status"的问题 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%84%E5%88%92"><span class="nav-number">1.</span> <span class="nav-text">规划</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92"><span class="nav-number">1.1.</span> <span class="nav-text">线性规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#scipy%E6%B1%82%E8%A7%A3"><span class="nav-number">1.1.1.</span> <span class="nav-text">scipy求解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B1"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">举例1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B2"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">举例2</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pulp%E6%B1%82%E8%A7%A3"><span class="nav-number">1.1.2.</span> <span class="nav-text">pulp求解</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pymprog%E6%B1%82%E8%A7%A3"><span class="nav-number">1.2.</span> <span class="nav-text">pymprog求解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">举例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E8%A7%84%E5%88%92"><span class="nav-number">1.3.</span> <span class="nav-text">整数规划</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cvxpy%E6%B1%82%E8%A7%A3"><span class="nav-number">1.3.1.</span> <span class="nav-text">cvxpy求解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B1-1"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">举例1</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%9E%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92"><span class="nav-number">1.4.</span> <span class="nav-text">非线性规划</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B-1"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">举例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B2-1"><span class="nav-number">1.4.0.2.</span> <span class="nav-text">举例2</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E9%80%BC%E8%BF%91"><span class="nav-number">2.</span> <span class="nav-text">数值逼近</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E7%BB%B4%E5%92%8C%E4%BA%8C%E7%BB%B4%E6%8F%92%E5%80%BC"><span class="nav-number">2.1.</span> <span class="nav-text">一维和二维插值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95%E6%8B%9F%E5%90%88"><span class="nav-number">2.2.</span> <span class="nav-text">最小二乘法拟合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B-2"><span class="nav-number">2.2.0.1.</span> <span class="nav-text">举例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B"><span class="nav-number">3.</span> <span class="nav-text">微分方程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E8%A7%A3"><span class="nav-number">3.1.</span> <span class="nav-text">解析解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E8%A7%A3"><span class="nav-number">3.2.</span> <span class="nav-text">数值解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B-3"><span class="nav-number">3.2.0.1.</span> <span class="nav-text">举例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E6%9F%93%E7%97%85%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.</span> <span class="nav-text">传染病模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SI%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.1.</span> <span class="nav-text">SI模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SIS%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.2.</span> <span class="nav-text">SIS模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SIR%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.3.</span> <span class="nav-text">SIR模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SIRS%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.4.</span> <span class="nav-text">SIRS模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SEIR%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.5.</span> <span class="nav-text">SEIR模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SEIRS%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.3.6.</span> <span class="nav-text">SEIRS模型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E8%AE%BA"><span class="nav-number">4.</span> <span class="nav-text">图论</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Dijkstra"><span class="nav-number">4.1.</span> <span class="nav-text">Dijkstra</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%B3%951-%E5%B8%B8%E7%94%A8"><span class="nav-number">4.1.1.</span> <span class="nav-text">解法1(常用)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%B3%952"><span class="nav-number">4.1.2.</span> <span class="nav-text">解法2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Floyd"><span class="nav-number">4.2.</span> <span class="nav-text">Floyd</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B-4"><span class="nav-number">4.2.0.1.</span> <span class="nav-text">举例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%BA%E5%9C%BA%E8%88%AA%E7%BA%BF%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.3.</span> <span class="nav-text">机场航线设计</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9E%E5%BD%92"><span class="nav-number">5.</span> <span class="nav-text">回归</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%AE%E5%88%86%E6%96%B9%E7%A8%8B"><span class="nav-number">6.</span> <span class="nav-text">差分方程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%92%E6%8E%A8%E5%85%B3%E7%B3%BB"><span class="nav-number">6.1.</span> <span class="nav-text">递推关系</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B-5"><span class="nav-number">6.1.0.1.</span> <span class="nav-text">举例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%85%B5%E6%AF%8D%E8%8F%8C%E7%94%9F%E9%95%BF%E6%A8%A1%E5%9E%8B"><span class="nav-number">6.1.0.1.1.</span> <span class="nav-text">酵母菌生长模型</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E5%BC%8F%E5%B7%AE%E5%88%86"><span class="nav-number">6.2.</span> <span class="nav-text">显式差分</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A9%AC%E5%B0%94%E7%A7%91%E5%A4%AB%E9%93%BE"><span class="nav-number">6.3.</span> <span class="nav-text">马尔科夫链</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E4%B8%BE%E6%8A%95%E7%A5%A8%E9%A2%84%E6%B5%8B"><span class="nav-number">6.3.0.1.</span> <span class="nav-text">选举投票预测</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%81%B0%E8%89%B2%E4%B8%8E%E6%A8%A1%E7%B3%8A"><span class="nav-number">7.</span> <span class="nav-text">灰色与模糊</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E5%B1%82%E6%A8%A1%E7%B3%8A%E8%AF%84%E4%BB%B7"><span class="nav-number">7.1.</span> <span class="nav-text">多层模糊评价</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8Ac%E5%9D%87%E5%80%BC%E8%81%9A%E7%B1%BB"><span class="nav-number">7.2.</span> <span class="nav-text">模糊c均值聚类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%81%B0%E8%89%B2%E9%A2%84%E6%B5%8B-%E7%BB%8F%E5%85%B8%E5%B8%B8%E7%94%A8"><span class="nav-number">7.3.</span> <span class="nav-text">灰色预测(经典常用)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%B3%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">7.3.1.</span> <span class="nav-text">算法步骤</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%92%99%E7%89%B9%E5%8D%A1%E7%BD%97"><span class="nav-number">8.</span> <span class="nav-text">蒙特卡罗</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%92%99%E7%89%B9%E5%8D%A1%E7%BD%97%E7%AE%97%E6%B3%95"><span class="nav-number">8.1.</span> <span class="nav-text">蒙特卡罗算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BE%E4%BE%8B-6"><span class="nav-number">8.1.0.1.</span> <span class="nav-text">举例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E9%97%A8%E9%97%AE%E9%A2%98"><span class="nav-number">8.2.</span> <span class="nav-text">三门问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A7%E5%85%8B%E5%8A%9B%E8%B1%86%E9%97%AE%E9%A2%98"><span class="nav-number">8.3.</span> <span class="nav-text">巧克力豆问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97"><span class="nav-number">9.</span> <span class="nav-text">时间序列</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E6%8C%87%E6%95%B0%E5%B9%B3%E6%BB%91%E6%B3%95"><span class="nav-number">9.1.</span> <span class="nav-text">简单指数平滑法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9C%8D%E5%B0%94%E7%89%B9%E7%BA%BF%E6%80%A7%E8%B6%8B%E5%8A%BF%E6%B3%95"><span class="nav-number">9.2.</span> <span class="nav-text">霍尔特线性趋势法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Holt-Winters%E5%AD%A3%E8%8A%82%E6%80%A7%E9%A2%84%E6%B5%8B%E6%A8%A1%E5%9E%8B"><span class="nav-number">9.3.</span> <span class="nav-text">Holt-Winters季节性预测模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%9B%9E%E5%BD%92%E7%A7%BB%E5%8A%A8%E5%B9%B3%E5%9D%87%E6%A8%A1%E5%9E%8B%EF%BC%88ARIMA%EF%BC%89"><span class="nav-number">9.4.</span> <span class="nav-text">自回归移动平均模型（ARIMA）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SVM"><span class="nav-number">10.</span> <span class="nav-text">SVM</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="jmchen"
      src="https://i.loli.net/2021/01/28/FYj8OWbtw5vkASy.png">
  <p class="site-author-name" itemprop="name">jmchen</p>
  <div class="site-description" itemprop="description">blog and notes</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/JimouChen" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;JimouChen" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jmc1625645320@gmail.com" title="E-Mail → mailto:jmc1625645320@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/JackNeaya" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;JackNeaya" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/jmc_ins_666/" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;jmc_ins_666&#x2F;" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/jmchen/" title="CNblog → https:&#x2F;&#x2F;www.cnblogs.com&#x2F;jmchen&#x2F;" rel="noopener" target="_blank"><i class="fab fa-codiepie fa-fw"></i>CNblog</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://goo.gl/maps/uMWT7Ft5fBKnuWpA8" title="China → https:&#x2F;&#x2F;goo.gl&#x2F;maps&#x2F;uMWT7Ft5fBKnuWpA8" rel="noopener" target="_blank"><i class="fa fa-map-marker fa-fw"></i>China</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/en" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.google.com/webhp?hl=zh-CN&sa=X&ved=0ahUKEwjXuJOnyr7uAhWRw4sBHUXdDbYQPAgI" title="https:&#x2F;&#x2F;www.google.com&#x2F;webhp?hl&#x3D;zh-CN&amp;sa&#x3D;X&amp;ved&#x3D;0ahUKEwjXuJOnyr7uAhWRw4sBHUXdDbYQPAgI" rel="noopener" target="_blank">google</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.bing.com/" title="https:&#x2F;&#x2F;www.bing.com&#x2F;" rel="noopener" target="_blank">bing</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kaifa.baidu.com/home" title="https:&#x2F;&#x2F;kaifa.baidu.com&#x2F;home" rel="noopener" target="_blank">kaifa-baidu</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-trophy"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JimouChen</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">221k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">3:21</span>
</div>

<!---->


<div>
<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("01/28/2021 00:00:00");
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
setInterval("createtime()",250);
</script>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '03F16su1ljoY1IjNuwBto0s9-gzGzoHsz',
      appKey     : 'rGQW3LTCDVstajC8LY05evC5',
      placeholder: "这里是留言的地方(支持markdown留言)~~~",
      avatar     : 'identicon',
      meta       : guest,
      pageSize   : '50' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
